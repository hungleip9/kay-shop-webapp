{"remainingRequest":"/home/hunglq/easy-shop-webapp/node_modules/thread-loader/dist/cjs.js!/home/hunglq/easy-shop-webapp/node_modules/babel-loader/lib/index.js!/home/hunglq/easy-shop-webapp/node_modules/eslint-loader/index.js??ref--13-0!/home/hunglq/easy-shop-webapp/src/api/index.js","dependencies":[{"path":"/home/hunglq/easy-shop-webapp/src/api/index.js","mtime":1616599194854},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7CnZhciBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTDsKZXhwb3J0IHZhciBhcGlBeGlvcyA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogIiIuY29uY2F0KGJhc2VVcmwsICIvYXBpIiksCiAgaGVhZGVyczogewogICAgcG9zdDogewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CiAgfQp9KTsKYXBpQXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICB2YXIgdG9rZW4gPSBzdG9yZS5zdGF0ZS5hdXRoLmFjY2Vzc1Rva2VuOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiLmNvbmNhdCh0b2tlbik7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKYXBpQXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSh1bmRlZmluZWQsIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvcikgewogICAgdmFyIG9yaWdpbmFsUmVxdWVzdCA9IGVycm9yLmNvbmZpZzsKCiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgJiYgIW9yaWdpbmFsUmVxdWVzdC5fcmV0cnkgJiYgcm91dGVyLmN1cnJlbnRSb3V0ZS5uYW1lICE9PSAnTG9naW4nKSB7CiAgICAgIHN0b3JlLmNvbW1pdCgnYXV0aC91cGRhdGVMb2dpblN0YXR1cycsIGZhbHNlKTsKICAgICAgc3RvcmUuY29tbWl0KCdhdXRoL3VwZGF0ZUF1dGhVc2VyJywge30pOwogICAgICBzdG9yZS5jb21taXQoJ2F1dGgvdXBkYXRlQWNjZXNzVG9rZW4nLCAnJyk7CiAgICAgIHJldHVybiByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0xvZ2luJwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgZ2V0QXV0aFVzZXI6IGZ1bmN0aW9uIGdldEF1dGhVc2VyKCkgewogICAgcmV0dXJuIGFwaUF4aW9zKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiAnL2F1dGgvbWUnCiAgICB9KTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihkYXRhKSB7CiAgICByZXR1cm4gYXBpQXhpb3MoewogICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgdXJsOiAnYXV0aC9sb2dpbicsCiAgICAgIGRhdGE6IGRhdGEKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["/home/hunglq/easy-shop-webapp/src/api/index.js"],"names":["axios","store","router","baseUrl","process","env","VUE_APP_BASE_URL","apiAxios","create","baseURL","headers","post","interceptors","request","use","config","token","state","auth","accessToken","common","error","Promise","reject","response","undefined","originalRequest","status","_retry","currentRoute","name","commit","push","getAuthUser","method","url","login","data"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;AAEA,OAAO,IAAMC,QAAQ,GAAGP,KAAK,CAACQ,MAAN,CAAa;AACnCC,EAAAA,OAAO,YAAIN,OAAJ,SAD4B;AAEnCO,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAE;AACJ,sBAAgB;AADZ;AADC;AAF0B,CAAb,CAAjB;AASPJ,QAAQ,CAACK,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAAC,MAAM,EAAI;AAC1C,MAAIC,KAAK,GAAGf,KAAK,CAACgB,KAAN,CAAYC,IAAZ,CAAiBC,WAA7B;;AACA,MAAIH,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACL,OAAP,CAAeU,MAAf,CAAsB,eAAtB,qBAAmDJ,KAAnD;AACD;;AACD,SAAOD,MAAP;AACD,CAND,EAMG,UAAAM,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CARD;AAUAd,QAAQ,CAACK,YAAT,CAAsBY,QAAtB,CAA+BV,GAA/B,CAAmCW,SAAnC,EAA8C,UAACJ,KAAD,EAAW;AACvD,MAAIA,KAAJ,EAAW;AACT,QAAMK,eAAe,GAAGL,KAAK,CAACN,MAA9B;;AACA,QAAIM,KAAK,CAACG,QAAN,CAAeG,MAAf,KAA0B,GAA1B,IAAiC,CAACD,eAAe,CAACE,MAAlD,IAA4D1B,MAAM,CAAC2B,YAAP,CAAoBC,IAApB,KAA6B,OAA7F,EAAsG;AACpG7B,MAAAA,KAAK,CAAC8B,MAAN,CAAa,wBAAb,EAAuC,KAAvC;AACA9B,MAAAA,KAAK,CAAC8B,MAAN,CAAa,qBAAb,EAAoC,EAApC;AACA9B,MAAAA,KAAK,CAAC8B,MAAN,CAAa,wBAAb,EAAuC,EAAvC;AACA,aAAO7B,MAAM,CAAC8B,IAAP,CAAY;AAACF,QAAAA,IAAI,EAAE;AAAP,OAAZ,CAAP;AACD;AACF;;AACD,SAAOR,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAXD;AAaA,eAAe;AACbY,EAAAA,WADa,yBACE;AACb,WAAO1B,QAAQ,CAAC;AACd2B,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,GAAG,EAAE;AAFS,KAAD,CAAf;AAID,GANY;AAObC,EAAAA,KAPa,iBAONC,IAPM,EAOA;AACX,WAAO9B,QAAQ,CAAC;AACd2B,MAAAA,MAAM,EAAE,MADM;AAEdC,MAAAA,GAAG,EAAE,YAFS;AAGdE,MAAAA,IAAI,EAAEA;AAHQ,KAAD,CAAf;AAKD;AAbY,CAAf","sourcesContent":["import axios from 'axios'\nimport store from \"../store\";\nimport router from \"../router\";\n\nconst baseUrl = process.env.VUE_APP_BASE_URL;\n\nexport const apiAxios = axios.create({\n  baseURL:`${baseUrl}/api`,\n  headers: {\n    post: {\n      'Content-Type': 'application/json'\n    }\n  }\n})\n\napiAxios.interceptors.request.use(config => {\n  let token = store.state.auth.accessToken\n  if (token) {\n    config.headers.common['Authorization'] = `Bearer ${token}`\n  }\n  return config\n}, error => {\n  return Promise.reject(error)\n})\n\napiAxios.interceptors.response.use(undefined, (error) => {\n  if (error) {\n    const originalRequest = error.config;\n    if (error.response.status === 401 && !originalRequest._retry && router.currentRoute.name !== 'Login') {\n      store.commit('auth/updateLoginStatus', false)\n      store.commit('auth/updateAuthUser', {})\n      store.commit('auth/updateAccessToken', '')\n      return router.push({name: 'Login'})\n    }\n  }\n  return Promise.reject(error);\n})\n\nexport default {\n  getAuthUser () {\n    return apiAxios({\n      method: 'get',\n      url: '/auth/me'\n    })\n  },\n  login (data) {\n    return apiAxios({\n      method: 'post',\n      url: 'auth/login',\n      data: data\n    })\n  },\n}\n"]}]}