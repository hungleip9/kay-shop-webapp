{"remainingRequest":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hunglq/easy-shop-webapp/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hunglq/easy-shop-webapp/src/views/Login.vue","mtime":1616599194858},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGFwaSBmcm9tICcuLi9hcGknCmltcG9ydCB7aXNWYWxpZEVtYWlsfSBmcm9tICcuLi91dGlscy9oZWxwZXInCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JFbWFpbDogJycsCiAgICAgIGVycm9yUGFzc3dvcmQ6ICcnLAogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnYXV0aCcsIFsnaXNBdXRoZW50aWNhdGVkJ10pCiAgfSwKICB3YXRjaDogewogICAgZW1haWwgKCkgewogICAgICB0aGlzLmVycm9yRW1haWwgPSAnJwogICAgfSwKICAgIHBhc3N3b3JkICgpIHsKICAgICAgdGhpcy5lcnJvclBhc3N3b3JkID0gJycKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucygnYXV0aCcsIFsKICAgICAgJ3VwZGF0ZUxvZ2luU3RhdHVzJywKICAgICAgJ3VwZGF0ZUFjY2Vzc1Rva2VuJwogICAgXSksCiAgICBoYW5kbGVMb2dpbiAoKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsaWREYXRhKCkpIHsKICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgfQogICAgICAgIGFwaS5sb2dpbihkYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy51cGRhdGVBY2Nlc3NUb2tlbihfLmdldChyZXNwb25zZSwgJ2RhdGEuYWNjZXNzX3Rva2VuJykpCiAgICAgICAgICB0aGlzLnVwZGF0ZUxvZ2luU3RhdHVzKHRydWUpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdIb21lJyB9KQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6ICdUaMO0bmcgdGluIHTDoGkga2hv4bqjbiBob+G6t2MgbeG6rXQga2jhuql1IGtow7RuZyBjaMOtbmggeMOhYycsIHR5cGU6ICdlcnJvcid9KTsKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgaXNWYWxpZERhdGEgKCkgewogICAgICBsZXQgZXJyb3IgPSBmYWxzZTsKICAgICAgdGhpcy5lcnJvckVtYWlsID0gJyc7CiAgICAgIHRoaXMuZXJyb3JQYXNzd29yZCA9ICcnOwoKICAgICAgaWYgKCFpc1ZhbGlkRW1haWwodGhpcy5lbWFpbCkpIHsKICAgICAgICBlcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvckVtYWlsID0gJ0VtYWlsIHNhaSDEkeG7i25oIGThuqFuZywgdnVpIGzDsm5nIG5o4bqtcCBs4bqhaSc7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZW1haWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JFbWFpbCA9ICdFbWFpbCBraMO0bmcgxJHGsOG7o2MgxJHhu4MgdHLhu5FuZyc7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucGFzc3dvcmQubGVuZ3RoIDwgNikgewogICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yUGFzc3dvcmQgPSAnTeG6rXQga2jhuql1IHBo4bqjaSBs4bubbiBoxqFuIDYga8O9IHThu7EnOwogICAgICB9CiAgICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yUGFzc3dvcmQgPSAnTeG6rXQga2jhuql1IGtow7RuZyDEkcaw4bujYyDEkeG7gyB0cuG7kW5nJzsKICAgICAgfQoKICAgICAgcmV0dXJuICFlcnJvcgogICAgfQogIH0sCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"loginForm\">\n        <div class=\"logo\">\n            <img src=\"../assets/images/logo_dark.png\" alt=\"\">\n        </div>\n        <div class=\"inputWrap\">\n            <el-input placeholder=\"Email\" type=\"email\" v-model=\"email\"></el-input>\n            <div v-if=\"this.errorEmail !== '' \" class=\"error\">\n                <span> {{ errorEmail }} </span>\n            </div>\n        </div>\n        <div class=\"inputWrap\">\n            <el-input  placeholder=\"Mật khẩu\" type=\"password\"  v-model=\"password\"></el-input>\n            <div v-if=\"this.errorPassword !== '' \" class=\"error\">\n                <span> {{ errorPassword }} </span>\n            </div>\n        </div>\n        <el-button type=\"primary\" class=\"loginButton\" @click=\"handleLogin()\">ĐĂNG NHẬP</el-button>\n    </div>\n</template>\n<script>\n  import { mapMutations, mapState } from 'vuex';\n  import api from '../api'\n  import {isValidEmail} from '../utils/helper'\n  import _ from 'lodash'\n  \n  export default {\n    name: \"Login\",\n    data () {\n      return {\n        errorEmail: '',\n        errorPassword: '',\n        email: '',\n        password: '',\n      }\n    },\n    computed: {\n      ...mapState('auth', ['isAuthenticated'])\n    },\n    watch: {\n      email () {\n        this.errorEmail = ''\n      },\n      password () {\n        this.errorPassword = ''\n      }\n    },\n    methods: {\n      ...mapMutations('auth', [\n        'updateLoginStatus',\n        'updateAccessToken'\n      ]),\n      handleLogin () {\n        if (this.isValidData()) {\n          let data = {\n            email: this.email,\n            password: this.password,\n          }\n          api.login(data).then((response) => {\n            this.updateAccessToken(_.get(response, 'data.access_token'))\n            this.updateLoginStatus(true)\n            this.$router.push({ name: 'Home' })\n          }).catch(() => {\n            this.$message({message: 'Thông tin tài khoản hoặc mật khẩu không chính xác', type: 'error'});\n          })\n        }\n      },\n      isValidData () {\n        let error = false;\n        this.errorEmail = '';\n        this.errorPassword = '';\n\n        if (!isValidEmail(this.email)) {\n          error = true;\n          this.errorEmail = 'Email sai định dạng, vui lòng nhập lại';\n        }\n        if (this.email.length === 0) {\n          error = true;\n          this.errorEmail = 'Email không được để trống';\n        }\n        if (this.password.length < 6) {\n          error = true;\n          this.errorPassword = 'Mật khẩu phải lớn hơn 6 ký tự';\n        }\n        if (this.password.length === 0) {\n          error = true;\n          this.errorPassword = 'Mật khẩu không được để trống';\n        }\n\n        return !error\n      }\n    },\n  }\n</script>\n<style lang=\"scss\">\n    @import \"../assets/styles/variables\";\n\n    .loginForm {\n        max-width: 400px;\n        width: 100%;\n        display: block;\n        box-sizing: border-box;\n        margin-left: auto;\n        margin-right: auto;\n        background: $colorWhite;\n        padding: 24px;\n        border-radius: 10px;\n        .logo {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin-bottom: 24px;\n            img {\n                width: 200px;\n                vertical-align: middle;\n                border-style: none;\n                box-sizing: border-box;\n            }\n        }\n        .inputWrap {\n            margin-bottom: 24px;\n            .error {\n                color: $colorRed;\n                margin-top: 8px;\n                font-size: 12px;\n            }\n        }\n        .loginButton {\n            width: 100%;\n        }\n    }\n</style>"]}]}