{"remainingRequest":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hunglq/easy-shop-webapp/src/views/Permission.vue?vue&type=style&index=0&id=267d0fee&scoped=true&lang=scss&","dependencies":[{"path":"/home/hunglq/easy-shop-webapp/src/views/Permission.vue","mtime":1618191709006},{"path":"/home/hunglq/easy-shop-webapp/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uL2Fzc2V0cy9zdHlsZXMvdmFyaWFibGVzIjsKCi5kYXNoYm9hcmQgewogICAgbGFiZWwgewogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICB9CiAgICAKICAgIC5wYWdpbmF0aW9uV2FycCB7CiAgICAgICAgcGFkZGluZzogMjBweCAwOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CgogICAgICAgIC5lbC1wYWdpbmF0aW9uIHsKICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0OwogICAgICAgIH0KCiAgICAgICAgLnRleHRJbmZvIHsKICAgICAgICAgICAgcCB7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IC45Mjg1N3JlbTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Ci50ZXh0IHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9Ci5zZWFyY2gtaW5wdXR7CiAgICB3aWR0aDogMjUlOwp9Ci5zZWFyY2gtYnRuewogICAgbWFyZ2luLWxlZnQ6MjBweDsKfQouc2hvdy1jYXJkewogICAgZmxvYXQ6cmlnaHQ7Cn0KICAuY2xlYXJmaXg6YmVmb3JlLAogIC5jbGVhcmZpeDphZnRlciB7CiAgICBkaXNwbGF5OiB0YWJsZTsKICAgIGNvbnRlbnQ6ICIiOwogIH0KICAuY2xlYXJmaXg6YWZ0ZXIgewogICAgY2xlYXI6IGJvdGgKICB9CiAgLmJ0bi1lZGl0LXdvcmsgewogICAgICAgIG1hcmdpbi1sZWZ0OiA3cHghaW1wb3J0YW50OwogICAgfQouYm94LWVkaXQtZGFpbG9nIHsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBjb2xvcjogIzIxMjUyOTsKICAgIHRleHQtYWxpZ246IGluaGVyaXQ7CiAgICBtYXJnaW4tdG9wOiA1cHg7CiAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgaGVpZ2h0OiAzMHB4OwogICAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgICBpIHsKICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgIH0KICAgIGN1cnNvcjogcG9pbnRlcjsKfQouYm94LWVkaXQtZGFpbG9nOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNGOEY5RkE7Cn0KLnBvcC1lZGl0ewogICAgY3Vyc29yOiBwb2ludGVyOwp9Ci5sYWJlbC1hZGR7CiAgICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgICAgbWFyZ2luLXRvcDogMzBweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KLnN0YXJ7CiAgICBjb2xvcjpyZWQ7Cn0KLmVycm9yewogICAgY29sb3I6cmVkOwogICAgZm9udC1zaXplOiAxMnB4OwogICAgd2lkdGg6IDI1MHB4OwogICAgbWFyZ2luLXRvcDogM3B4Owp9Cg=="},{"version":3,"sources":["Permission.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2XA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Permission.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"dashboard\">\n        <el-card style=\"margin-top:20px\">\n            <div class=\"box-tabel\">\n                \n            </div>\n        </el-card>\n  </div>\n</template>\n\n<script>\n\nimport moment from 'moment'\nimport api from '../api'\nimport {isValidEmail, isValidPhone} from '../utils/helper'\nimport {mapMutations, mapState,} from 'vuex'\nimport _ from \"lodash\";\nimport {formatDate} from \"@/utils/helper\";\nimport router from \"@/router\";\nexport default {\n  name: 'Customer',\n  props: {\n    msg: String\n  },\n  components: {\n  },\n  computed: {\n    ...mapState('auth', ['authUser']),\n  },\n  data() {\n        return {\n            id: '',\n            name: '',\n            phone: '',\n            address: '',\n            email: '',\n            password: '',\n            confirmPassword: '',\n            errorName:'',\n            errorEmail: '',\n            errorPhone:'',\n            errorPassword:'',\n            errorConfimPassword:'',\n            search:'',\n            total:0,\n            dialogAddCustomer: false,\n            dialogEditCustomer: false,\n            dialogResetPassword: false,\n            tableData: [],\n            value: '',\n            passwordNew: '',\n            errorpasswordNew: '',\n            //pagination\n            loading: true,\n            page: {\n                currentPage: 1,\n                pageSize: 10,\n                total: 0,\n                from: 0,\n                to: 0\n            },\n            admin: 1,\n            staff: 0\n        }\n    },\n    methods: {\n      ...mapMutations([\n        'updateTitle','updateSideBar'\n      ]),\n      changePageTitle() {\n        this.updateTitle('Vai trò thành viên')\n      },\n      editRole() {\n          router.push({ name: \"Products\" });\n      },\n        changeIndexSidebar() {\n            this.updateSideBar('7')\n        },\n        formatDateCreated (dateString) {\n            return formatDate(dateString)\n        },\n        //pagination\n        handleCurrentChange(val) {\n            let payload = {\n                page: val,\n                q: this.search\n            }\n            this.getDataUser(payload);\n        },\n\n        closeAddUserBtn() {\n            this.dialogAddCustomer = false\n            this.reloadItem()\n        },\n        closeEditUserBtn() {\n            this.dialogEditCustomer = false\n            this.reloadItem()\n        },\n        addNewUser() {\n            if (this.isValidData()) {\n                let data = {\n                    name: this.name,\n                    phone: this.phone,\n                    email: this.email,\n                    address: this.address,\n                    role_id: this.value,\n                    password: this.passwordNew\n                }\n                api.addNewUser(data).then(() => {\n                    this.$message({\n                        message: 'Thêm mới nhân viên thành công!',\n                        type: 'success'\n                    });\n                    this.dialogAddCustomer = false\n                    this.reloadItem()\n                    this.getDataUser()\n                }).catch(error => {\n                  if (error.response.data.error.phone[0]) {\n                    this.$message({\n                      message: error.response.data.error.phone[0],\n                      type: 'error',\n                      center: true\n                    });\n                  } else {\n                    this.$message({\n                      message: 'Thêm mới thất bại',\n                      type: 'error',\n                      center: true\n                    });\n                  }\n                });\n            }\n        },\n        openEditCustomer(data) {\n            this.dialogEditCustomer = true\n            this.id = data._id\n            this.name = data.name\n            this.email = data.email\n            this.phone = data.phone\n            this.address = data.address\n            this.value = data.role_id\n        },\n        editUser() {\n            if (this.isValidDataEdit()) {\n                let data = {\n                    id: this.id,\n                    name: this.name,\n                    email: this.email,\n                    phone: this.phone,\n                    address: this.address,\n                    role_id: this.value,\n                    password: this.passwordNew\n                }\n                api.editUser(data).then(() => {\n                    this.$message({\n                        message: 'Sửa nhân viên thành công!',\n                        type: 'success',\n                        center:true\n                    });\n                    this.reloadItem()\n                    this.getDataUser()\n                  this.dialogEditCustomer = false\n                }).catch(error => {\n                  if (error.response.data.error.phone[0]) {\n                    this.$message({\n                      message: error.response.data.error.phone[0],\n                      type: 'error',\n                      center: true\n                    });\n                  } else {\n                    this.$message({\n                      message: 'Thêm mới thất bại',\n                      type: 'error',\n                      center: true\n                    });\n                  }\n                });\n            }\n        },\n        openResetPassword(data) {\n            this.id = data._id\n            this.dialogResetPassword = true\n        },\n        closeResetPasswordBtn() {\n            this.dialogResetPassword = false\n            this.reloadItem()\n        },\n        resetPassword() {\n            if(this.isValidDataPassWord()) {\n                let data = {\n                    id: this.id,\n                    password: this.password,\n                }\n                api.resetPassword(data).then(() =>{\n                    this.$message({\n                        message: 'Đặt lại mật khẩu thành công!',\n                        type: 'success',\n                        center:true\n                    });\n                    this.dialogResetPassword = false\n                    this.reloadItem()\n                })\n            }\n        },\n        deleteUser(id) {\n            this.$confirm('Bạn có chắc chắn muốn xóa không?', 'Cảnh báo', {\n                confirmButtonText: 'Xóa',\n                cancelButtonText: 'Hủy',\n                confirmButtonClass: 'btn-delete-list',\n                type: 'warning'\n            }).then(() => {\n                api.deleteUser(id).then(() => {\n                    this.$message({\n                        message: 'Xóa nhân viên thành công!',\n                        type: 'success',\n                        center:true\n                    });\n                    this.getDataUser()\n                })\n            })\n        },\n        isValidData () {\n          let error = false;\n          this.errorName = '';\n          this.errorPhone = '';\n          this.errorEmail = '';\n          this.errorpasswordNew = '';\n          if(this.email) {\n              if (!isValidEmail(this.email)) {\n                  error = true;\n                  this.errorEmail = 'Email sai định dạng, vui lòng nhập lại';\n              }\n          }\n          if (this.name.length === 0) {\n          error = true;\n          this.errorName = 'Tên không được để trống';\n          }\n          if (!isValidPhone(this.phone)) {\n              error = true;\n              this.errorPhone = 'Số điện thoại sai định dạng, vui lòng nhập lại';\n          }\n          if (this.passwordNew.length === 0) {\n            error = true;\n            this.errorpasswordNew = 'Mật khẩu không được để trống';\n          } else if (this.passwordNew.length === 0 && this.passwordNew.length < 6) {\n            error = true;\n            this.errorpasswordNew = 'Mật khẩu phải lớn hơn 6 ký tự';\n          }\n\n          return !error\n        },\n      isValidDataEdit() {\n        let error = false;\n        this.errorName = '';\n        this.errorPhone = '';\n        this.errorEmail = '';\n        if(this.email) {\n          if (!isValidEmail(this.email)) {\n            error = true;\n            this.errorEmail = 'Email sai định dạng, vui lòng nhập lại';\n          }\n        }\n        if (this.name.length === 0) {\n          error = true;\n          this.errorName = 'Tên không được để trống';\n        }\n        if (!isValidPhone(this.phone)) {\n          error = true;\n          this.errorPhone = 'Số điện thoại sai định dạng, vui lòng nhập lại';\n        }\n        return !error\n      },\n        isValidDataPassWord () {\n            let errorResetPW = false;\n            this.errorPassword = '';\n            this.errorConfimPassword = '';\n            if (this.password.length < 6) {\n            errorResetPW = true;\n            this.errorPassword = 'Mật khẩu phải lớn hơn 6 ký tự';\n            }\n            if (this.password.length === 0) {\n            errorResetPW = true;\n            this.errorPassword = 'Mật khẩu không được để trống';\n            }\n            if (this.confirmPassword.length === 0) {\n            errorResetPW = true;\n            this.errorConfimPassword = 'Mật khẩu nhập lại không được để trống';\n            }\n            if (this.confirmPassword !== this.password) {\n            errorResetPW = true;\n            this.errorConfimPassword = 'Mật khẩu nhập lại không trùng nhau';\n            }\n\n            return !errorResetPW\n        },\n        reloadItem() {\n        this.errorName = '';\n        this.errorPhone = '';\n        this.errorAddRess = '';\n        this.errorEmail = '';\n        this.name = ''\n        this.phone = ''\n        this.address = ''\n        this.email = ''\n        this.id = ''\n        this.password = ''\n        this.confirmPassword = ''\n        this.errorPassword = ''\n        this.errorConfimPassword = ''\n        this.passwordNew = ''\n        this.errorpasswordNew = ''\n        },\n        // lay ra data user\n        getDataUser(params = {}) {\n            this.loading = true\n            api.getDataUser(params).then((res) => {\n\n                this.tableData = res.data.data.data\n\n                this.total = res.data.data.total;\n                this.page.currentPage = _.get(res, 'data.data.current_page')\n                this.page.pageSize = _.get(res, 'data.data.per_page')\n                this.page.total = _.get(res, 'data.data.total')\n                let from = _.get(res, 'data.data.from', 0)\n                let to = _.get(res, 'data.data.to', 0)\n                this.page.from = from ? from : 0\n                this.page.to = to ? to : 0\n\n                this.loading = false\n            }).catch(() => {\n                this.loading = false\n            })\n        },\n        // tim kiem khach hang\n        submitSearch() {\n            let params = {\n                q: this.search,\n            };\n            this.getDataUser(params)\n        },\n        fomatDate(dateString) {\n            return moment(dateString).format('DD/MM/YYYY')\n        }\n    },\n    mounted(){\n        this.changePageTitle()\n        this.changeIndexSidebar()\n        this.getDataUser()\n    },\n  watch: {\n    dialogAddCustomer (value) {\n      if (value) {\n        this.id = ''\n        this.name = ''\n        this.phone = ''\n        this.address = ''\n        this.email = ''\n        this.errorName = ''\n        this.errorEmail = ''\n        this.errorPhone = ''\n        this.errorAddRess = ''\n        this.value = ''\n        this.passwordNew = ''\n        this.errorpasswordNew = ''\n      }\n    },\n    dialogEditCustomer (value) {\n      if (value) {\n        this.errorName = ''\n        this.errorEmail = ''\n        this.errorPhone = ''\n        this.errorAddRess = ''\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../assets/styles/variables\";\n\n.dashboard {\n    label {\n        font-weight: bold;\n        margin-bottom: 10px;\n    }\n    \n    .paginationWarp {\n        padding: 20px 0;\n        margin-bottom: 10px;\n\n        .el-pagination {\n            float: right;\n        }\n\n        .textInfo {\n            p {\n                font-size: .92857rem;\n                margin: 10px 0;\n            }\n        }\n    }\n}\n.text {\n    font-size: 14px;\n  }\n.search-input{\n    width: 25%;\n}\n.search-btn{\n    margin-left:20px;\n}\n.show-card{\n    float:right;\n}\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n  .clearfix:after {\n    clear: both\n  }\n  .btn-edit-work {\n        margin-left: 7px!important;\n    }\n.box-edit-dailog {\n    font-weight: 400;\n    color: #212529;\n    text-align: inherit;\n    margin-top: 5px;\n    margin-bottom: 10px;\n    height: 30px;\n    line-height: 30px;\n    i {\n     margin-right: 5px;\n    }\n    cursor: pointer;\n}\n.box-edit-dailog:hover {\n    background-color: #F8F9FA;\n}\n.pop-edit{\n    cursor: pointer;\n}\n.label-add{\n      margin-bottom: 5px;\n      margin-top: 30px;\n      font-weight: bold;\n}\n.star{\n    color:red;\n}\n.error{\n    color:red;\n    font-size: 12px;\n    width: 250px;\n    margin-top: 3px;\n}\n</style>\n"]}]}