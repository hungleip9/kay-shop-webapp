{"remainingRequest":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hunglq/easy-shop-webapp/src/views/Products.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hunglq/easy-shop-webapp/src/views/Products.vue","mtime":1620027224741},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/easy-shop-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAiLi4vYXBpIjsKaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGZvcm1hdE1vbmV5LCBmb3JtYXRTdHJpbmd0b051bWJlciB9IGZyb20gIkAvdXRpbHMvaGVscGVyIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9kdWN0cyIsCiAgZGF0YSgpIHsKICAgIHZhciB2YWxpZGF0ZVNhbGVQcmljZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKAogICAgICAgIHZhbHVlICYmCiAgICAgICAgdGhpcy5mb3JtLm9yaWdpbmFsX3ByaWNlICYmCiAgICAgICAgZm9ybWF0U3RyaW5ndG9OdW1iZXIodmFsdWUpIDwKICAgICAgICAgIGZvcm1hdFN0cmluZ3RvTnVtYmVyKHRoaXMuZm9ybS5vcmlnaW5hbF9wcmljZSkKICAgICAgKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJHacOhIGLDoW4gcGjhuqNpIGzhu5tuIGjGoW4gaG/hurdjIGLhurFuZyBnacOhIG5o4bqtcCIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgdmFyIHZhbGlkYXRlT3JpZ2luUHJpY2UgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICgKICAgICAgICB2YWx1ZSAmJgogICAgICAgIHRoaXMuZm9ybS5zYWxlX3ByaWNlICYmCiAgICAgICAgZm9ybWF0U3RyaW5ndG9OdW1iZXIodmFsdWUpID4gZm9ybWF0U3RyaW5ndG9OdW1iZXIodGhpcy5mb3JtLnNhbGVfcHJpY2UpCiAgICAgICkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigiR2nDoSBuaOG6rXAgcGjhuqNpIG5o4buPIGjGoW4gaG/hurdjIGLhurFuZyBnacOhIGLDoW4iKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZFRleHQ6ICIiLAogICAgICBmaWxlOiAiIiwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgcHJvZHVjdHM6IFtdLAogICAgICBkaWFsb2dBZGRQcm9kdWN0OiBmYWxzZSwKICAgICAgZGlhbG9nRWRpdFByb2R1Y3Q6IGZhbHNlLAogICAgICBkaWFsb2dFeGNlbDogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBza3U6ICIiLAogICAgICAgIGltYWdlOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgY2F0ZWdvcnlfaWRzOiBbXSwKICAgICAgICB3ZWlnaHQ6ICIiLAogICAgICAgIHNhbGVfcHJpY2U6ICIiLAogICAgICAgIG9yaWdpbmFsX3ByaWNlOiAiIiwKICAgICAgICBxdWFudGl0eV9pbl9zdG9jazogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlTDqm4gc+G6o24gcGjhuqltIGtow7RuZyDEkcaw4bujYyBi4buPIHRy4buRbmchIiwKICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgc2t1OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiTcOjIHPhuqNuIHBo4bqpbSBraMO0bmcgxJHGsOG7o2MgYuG7jyB0cuG7kW5nISIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHNhbGVfcHJpY2U6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJHacOhIGLDoW4ga2jDtG5nIMSRxrDhu6NjIGLhu48gdHLhu5FuZyEiLAogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVTYWxlUHJpY2UsCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIG9yaWdpbmFsX3ByaWNlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiR2nDoSBuaOG6rXAga2jDtG5nIMSRxrDhu6NjIGLhu48gdHLhu5FuZyEiLAogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVPcmlnaW5QcmljZSwKICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgcXVhbnRpdHlfaW5fc3RvY2s6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJOaOG6rXAgc+G7kSBsxrDhu6NuZyBz4bqjbiBwaOG6qW0iLAogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgbmV3UHJvZHVjdEltYWdlVXJsOiAiIiwKICAgICAgbmV3UHJvZHVjdFVwbG9hZEltYWdlOiAiIiwKICAgICAgYmFzZVVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCArICIvc3RvcmFnZS8iLAogICAgICBwcm9kdWN0RWRpdElkOiAiIiwKICAgICAgY2F0ZWdvcmllczogW10sCgogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBwYWdlOiB7CiAgICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGZyb206IDAsCiAgICAgICAgdG86IDAsCiAgICAgIH0sCiAgICAgIGNhdGVnb3J5RmlsdGVyOiAiIiwKICAgICAgZXJyb3JTa3U6ICIiLAogICAgICBlcnJvclF1YW50aXR5OiAiIiwKICAgICAgZGlhbG9nSW1wb3J0OiBmYWxzZSwKICAgICAgc2t1SW1wb3J0OiAnJywKICAgICAgbmFtZUltcG9ydDogJycsCiAgICAgIGlkSW1wb3J0OiAnJywKICAgICAgZm9ybUltcG9ydDogewogICAgICAgIHF1YW50aXR5OiAnJwogICAgICB9LAogICAgICBydWxlc0ltcG9ydDogewogICAgICAgIHF1YW50aXR5OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiTmjhuq1wIHPhu5EgbMaw4bujbmcgc+G6o24gcGjhuqltIiwKICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsCiAgICAgICAgICB9LAogICAgICAgIF0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucyhbInVwZGF0ZVRpdGxlIiwgInVwZGF0ZVNpZGVCYXIiXSksCiAgICBjaGFuZ2VQYWdlVGl0bGUoKSB7CiAgICAgIHRoaXMudXBkYXRlVGl0bGUoIkRhbmggc8OhY2ggc+G6o24gcGjhuqltIik7CiAgICB9LAogICAgY2hhbmdlSW5kZXhTaWRlYmFyKCkgewogICAgICB0aGlzLnVwZGF0ZVNpZGVCYXIoIjMiKTsKICAgIH0sCiAgICBvcGVuRGlhbG9nRXhjZWwoKSB7CiAgICAgIHRoaXMuZGlhbG9nRXhjZWwgPSB0cnVlOwogICAgICB0aGlzLnVwbG9hZFRleHQgPQogICAgICAgICJUaOG6oyB04buHcCB2w6BvIMSRw6J5IGhv4bq3YyA8ZW0gc3R5bGU9J2NvbG9yOiAjNDA5RUZGOyBmb250LXN0eWxlOiBub3JtYWw7Jz5i4bqlbSDEkcOqIHThuqNpIHThu4dwIGzDqm48L2VtPiI7CiAgICB9LAogICAgY2xvc2VEYWlsb2dFeGNlbCgpIHsKICAgICAgdGhpcy5kaWFsb2dFeGNlbCA9IGZhbHNlOwogICAgfSwKICAgIC8vZG93bmxvYWQgZmlsZSBleGNlbCBtYXUKICAgIGRvd25sb2FkRXhlbFRlbXBsYXRlKCkgewogICAgICBhcGkuZG93bG9hZEV4Y2VsVGVtcGxhdGUoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtyZXNwb25zZS5kYXRhXSkpOwogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsICJEYW5oIHPDoWNoIHPhuqNuIHBo4bqpbSBt4bqrdS54bHN4Iik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vdXBsb2FkIGZpbGUgZXhjZWwKICAgIGltcG9ydEV4Y2VsKCkgewogICAgICBjb25zdCBmcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZybURhdGEuYXBwZW5kKCJmaWxlIiwgdGhpcy5maWxlKTsKICAgICAgYXBpLmltcG9ydFByb2R1Y3RFeGNlbChmcm1EYXRhKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmRpYWxvZ0V4Y2VsID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAiTmjhuq1wIHRow6BuaCBjw7RuZyIsCiAgICAgICAgICBjZW50ZXI6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLmdldERhdGEoKTsKICAgIH0sCiAgICBjaGFuZ2VGaWxlKGUpIHsKICAgICAgdGhpcy5maWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHRoaXMudXBsb2FkVGV4dCA9ICLEkMOjIGNo4buNbiAxIGZpbGU6ICIgKyB0aGlzLmZpbGUubmFtZTsKICAgIH0sCiAgICBjbG9zZUltcG9ydCgpIHsKICAgICAgdGhpcy5maWxlID0gbnVsbDsKICAgIH0sCiAgICBob3ZlckltYWdlKCkgewogICAgICB0aGlzLiRyZWZzLnByb2R1Y3RIb3Zlci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgfSwKICAgIGhvdmVyTGVhdmVJbWFnZSgpIHsKICAgICAgdGhpcy4kcmVmcy5wcm9kdWN0SG92ZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2VJbWFnZShlKSB7CiAgICAgIGlmIChlLnRhcmdldC5maWxlcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLm5ld1Byb2R1Y3RVcGxvYWRJbWFnZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgIHRoaXMubmV3UHJvZHVjdEltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlLnRhcmdldC5maWxlc1swXSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVJbWFnZSgpIHsKICAgICAgdGhpcy5uZXdQcm9kdWN0VXBsb2FkSW1hZ2UgPSAiIjsKICAgICAgdGhpcy5uZXdQcm9kdWN0SW1hZ2VVcmwgPSAiIjsKICAgIH0sCiAgICBzdG9yZVByb2R1Y3QoZm9ybUFkZFByb2R1Y3QpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtQWRkUHJvZHVjdF0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCBmcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmcm1EYXRhLmFwcGVuZCgibmFtZSIsIHRoaXMuZm9ybS5uYW1lKTsKICAgICAgICAgIGZybURhdGEuYXBwZW5kKCJza3UiLCB0aGlzLmZvcm0uc2t1KTsKICAgICAgICAgIGZybURhdGEuYXBwZW5kKCJjYXRlZ29yeV9pZHMiLCB0aGlzLmZvcm0uY2F0ZWdvcnlfaWRzKTsKICAgICAgICAgIGZybURhdGEuYXBwZW5kKAogICAgICAgICAgICAib3JpZ2luYWxfcHJpY2UiLAogICAgICAgICAgICBmb3JtYXRTdHJpbmd0b051bWJlcih0aGlzLmZvcm0ub3JpZ2luYWxfcHJpY2UpCiAgICAgICAgICApOwogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoCiAgICAgICAgICAgICJzYWxlX3ByaWNlIiwKICAgICAgICAgICAgZm9ybWF0U3RyaW5ndG9OdW1iZXIodGhpcy5mb3JtLnNhbGVfcHJpY2UpCiAgICAgICAgICApOwogICAgICAgICAgaWYgKHRoaXMuZm9ybS53ZWlnaHQpIHsKICAgICAgICAgICAgZnJtRGF0YS5hcHBlbmQoIndlaWdodCIsIGZvcm1hdFN0cmluZ3RvTnVtYmVyKHRoaXMuZm9ybS53ZWlnaHQpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZybURhdGEuYXBwZW5kKCJ3ZWlnaHQiLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGZybURhdGEuYXBwZW5kKAogICAgICAgICAgICAicXVhbnRpdHlfaW5fc3RvY2siLAogICAgICAgICAgICBmb3JtYXRTdHJpbmd0b051bWJlcih0aGlzLmZvcm0ucXVhbnRpdHlfaW5fc3RvY2spCiAgICAgICAgICApOwogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoImRlc2NyaXB0aW9uIiwgdGhpcy5mb3JtLmRlc2NyaXB0aW9uKTsKICAgICAgICAgIGlmICh0aGlzLm5ld1Byb2R1Y3RVcGxvYWRJbWFnZSkgewogICAgICAgICAgICBmcm1EYXRhLmFwcGVuZCgiaW1hZ2UiLCB0aGlzLm5ld1Byb2R1Y3RVcGxvYWRJbWFnZSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgYXBpCiAgICAgICAgICAgIC5hZGRQcm9kdWN0KGZybURhdGEpCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLm5ld1Byb2R1Y3RVcGxvYWRJbWFnZSA9ICIiOwogICAgICAgICAgICAgIHRoaXMubmV3UHJvZHVjdEltYWdlVXJsID0gIiI7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVGjDqm0gbeG7m2kgdGjDoG5oIGPDtG5nISIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5lcnJvclNrdSA9ICIiCiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dBZGRQcm9kdWN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBfLmdldChlcnJvci5yZXNwb25zZSwgImRhdGEuZXJyb3IiLCB7fSk7CiAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXy5nZXQoZXJyb3IucmVzcG9uc2UsICJkYXRhLm1lc3NhZ2UiLCAiIiksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvclNrdSA9IF8uZ2V0KGVycm9ycywgInNrdVswXSIsICIiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VBZGRQcm9kdWN0KCkgewogICAgICB0aGlzLmRpYWxvZ0FkZFByb2R1Y3QgPSBmYWxzZTsKICAgICAgdGhpcy5lcnJvclNrdSA9ICIiOwogICAgfSwKICAgIGVkaXRQcm9kdWN0KHByb2R1Y3QpIHsKICAgICAgdGhpcy5kaWFsb2dFZGl0UHJvZHVjdCA9IHRydWU7CiAgICAgIHRoaXMucHJvZHVjdEVkaXRJZCA9IHByb2R1Y3QuX2lkOwogICAgICB0aGlzLmZvcm0ubmFtZSA9IHByb2R1Y3QubmFtZTsKICAgICAgdGhpcy5mb3JtLnNrdSA9IHByb2R1Y3Quc2t1OwogICAgICBpZiAocHJvZHVjdC5jYXRlZ29yeV9pZHMpIHsKICAgICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlfaWRzID0gcHJvZHVjdC5jYXRlZ29yeV9pZHM7CiAgICAgIH0KICAgICAgdGhpcy5mb3JtLm9yaWdpbmFsX3ByaWNlID0gZm9ybWF0TW9uZXkocHJvZHVjdC5vcmlnaW5hbF9wcmljZS50b1N0cmluZygpKTsKICAgICAgdGhpcy5mb3JtLnNhbGVfcHJpY2UgPSBmb3JtYXRNb25leShwcm9kdWN0LnNhbGVfcHJpY2UudG9TdHJpbmcoKSk7CiAgICAgIHRoaXMuZm9ybS53ZWlnaHQgPSBmb3JtYXRNb25leShwcm9kdWN0LndlaWdodC50b1N0cmluZygpKTsKICAgICAgdGhpcy5mb3JtLnF1YW50aXR5X2luX3N0b2NrID0gZm9ybWF0TW9uZXkoCiAgICAgICAgcHJvZHVjdC5xdWFudGl0eV9pbl9zdG9jay50b1N0cmluZygpCiAgICAgICk7CiAgICAgIGlmIChwcm9kdWN0LmRlc2NyaXB0aW9uICE9IG51bGwpIHsKICAgICAgICB0aGlzLmZvcm0uZGVzY3JpcHRpb24gPSBwcm9kdWN0LmRlc2NyaXB0aW9uOwogICAgICB9CiAgICAgIGlmIChwcm9kdWN0LmltYWdlKSB7CiAgICAgICAgdGhpcy5uZXdQcm9kdWN0SW1hZ2VVcmwgPSB0aGlzLmJhc2VVcmwgKyBwcm9kdWN0LmltYWdlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlVXBkYXRlUHJvZHVjdChmb3JtRWRpdFByb2R1Y3QpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtRWRpdFByb2R1Y3RdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IGZybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgIGZybURhdGEuYXBwZW5kKCJuYW1lIiwgdGhpcy5mb3JtLm5hbWUpOwogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoInNrdSIsIHRoaXMuZm9ybS5za3UpOwogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoImNhdGVnb3J5X2lkcyIsIHRoaXMuZm9ybS5jYXRlZ29yeV9pZHMpOwogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoCiAgICAgICAgICAgICJvcmlnaW5hbF9wcmljZSIsCiAgICAgICAgICAgIGZvcm1hdFN0cmluZ3RvTnVtYmVyKHRoaXMuZm9ybS5vcmlnaW5hbF9wcmljZSkKICAgICAgICAgICk7CiAgICAgICAgICBmcm1EYXRhLmFwcGVuZCgKICAgICAgICAgICAgInNhbGVfcHJpY2UiLAogICAgICAgICAgICBmb3JtYXRTdHJpbmd0b051bWJlcih0aGlzLmZvcm0uc2FsZV9wcmljZSkKICAgICAgICAgICk7CiAgICAgICAgICBpZiAodGhpcy5mb3JtLndlaWdodCkgewogICAgICAgICAgICBmcm1EYXRhLmFwcGVuZCgid2VpZ2h0IiwgZm9ybWF0U3RyaW5ndG9OdW1iZXIodGhpcy5mb3JtLndlaWdodCkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZnJtRGF0YS5hcHBlbmQoIndlaWdodCIsIDApOwogICAgICAgICAgfQogICAgICAgICAgZnJtRGF0YS5hcHBlbmQoCiAgICAgICAgICAgICJxdWFudGl0eV9pbl9zdG9jayIsCiAgICAgICAgICAgIGZvcm1hdFN0cmluZ3RvTnVtYmVyKHRoaXMuZm9ybS5xdWFudGl0eV9pbl9zdG9jaykKICAgICAgICAgICk7CiAgICAgICAgICBmcm1EYXRhLmFwcGVuZCgiZGVzY3JpcHRpb24iLCB0aGlzLmZvcm0uZGVzY3JpcHRpb24pOwogICAgICAgICAgaWYgKHRoaXMubmV3UHJvZHVjdFVwbG9hZEltYWdlKSB7CiAgICAgICAgICAgIGZybURhdGEuYXBwZW5kKCJpbWFnZSIsIHRoaXMubmV3UHJvZHVjdFVwbG9hZEltYWdlKTsKICAgICAgICAgIH0KICAgICAgICAgIGFwaS51cGRhdGVQcm9kdWN0KHRoaXMucHJvZHVjdEVkaXRJZCwgZnJtRGF0YSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5uZXdQcm9kdWN0VXBsb2FkSW1hZ2UgPSAiIjsKICAgICAgICAgICAgICB0aGlzLm5ld1Byb2R1Y3RJbWFnZVVybCA9ICIiOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogIkPhuq1wIG5o4bqtdCB0aMOgbmggY8O0bmcuIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmVycm9yU2t1ID0gIiIKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0VkaXRQcm9kdWN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZS5jdXJyZW50UGFnZSwKICAgICAgICAgICAgICAgIHE6IHRoaXMuc2VhcmNoLAogICAgICAgICAgICAgICAgY2F0ZWdvcnlfaWQ6IHRoaXMuY2F0ZWdvcnlGaWx0ZXIsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBhcGkuZ2V0RGF0YVByb2R1Y3RzKHBhcmFtcykKICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBfLmdldChlcnJvci5yZXNwb25zZSwgImRhdGEuZXJyb3IiLCB7fSk7CiAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXy5nZXQoZXJyb3IucmVzcG9uc2UsICJkYXRhLm1lc3NhZ2UiLCAiIiksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvclNrdSA9IF8uZ2V0KGVycm9ycywgInNrdVswXSIsICIiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VFZGl0UHJvZHVjdCgpIHsKICAgICAgdGhpcy5lcnJvclNrdSA9ICIiCiAgICAgIHRoaXMuZGlhbG9nRWRpdFByb2R1Y3QgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGVQcm9kdWN0KGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB4w7NhIHPhuqNuIHBo4bqpbSBuw6B5PyIsICJD4bqjbmggYsOhbyIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIljDs2EiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJI4buneSIsCiAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuLWRlbGV0ZS1saXN0IiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgYXBpCiAgICAgICAgICAuZGVsZXRlUHJvZHVjdChpZCkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIljDs2Egc+G6o24gcGjhuqltIHRow6BuaCBjw7RuZyEiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBjZW50ZXI6IHRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZS5jdXJyZW50UGFnZSwKICAgICAgICAgICAgICBxOiB0aGlzLnNlYXJjaCwKICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogdGhpcy5jYXRlZ29yeUZpbHRlciwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYXBpCiAgICAgICAgICAgICAgLmdldERhdGFQcm9kdWN0cyhwYXJhbXMpCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLnBhZ2UudG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IF8uZ2V0KHJlc3BvbnNlLCAiZGF0YS5kYXRhLmZyb20iLCAwKTsKICAgICAgICAgICAgICAgIGxldCB0byA9IF8uZ2V0KHJlc3BvbnNlLCAiZGF0YS5kYXRhLnRvIiwgMCk7CiAgICAgICAgICAgICAgICB0aGlzLnBhZ2UuZnJvbSA9IGZyb20gPyBmcm9tIDogMDsKICAgICAgICAgICAgICAgIHRoaXMucGFnZS50byA9IHRvID8gdG8gOiAwOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIljDs2Egc+G6o24gcGjhuqltIHRo4bqldCBi4bqhaSEiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgY2VudGVyOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlUGFnZSh2YWwpIHsKICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgcGFnZTogdmFsLAogICAgICAgIHE6IHRoaXMuc2VhcmNoLAogICAgICAgIGNhdGVnb3J5X2lkOiB0aGlzLmNhdGVnb3J5RmlsdGVyLAogICAgICB9OwogICAgICB0aGlzLmdldERhdGEocGF5bG9hZCk7CiAgICB9LAogICAgaGFuZGxlU2VhcmNoKCkgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHE6IHRoaXMuc2VhcmNoLAogICAgICAgIGNhdGVnb3J5X2lkOiB0aGlzLmNhdGVnb3J5RmlsdGVyLAogICAgICB9OwogICAgICB0aGlzLmdldERhdGEocGFyYW1zKTsKICAgIH0sCiAgICBnZXREYXRhKHBhcmFtcyA9IHt9KSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGFwaQogICAgICAgIC5nZXREYXRhUHJvZHVjdHMocGFyYW1zKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSByZXMuZGF0YS5kYXRhLmRhdGE7CgogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgICB0aGlzLnBhZ2UuY3VycmVudFBhZ2UgPSBfLmdldChyZXMsICJkYXRhLmRhdGEuY3VycmVudF9wYWdlIik7CiAgICAgICAgICB0aGlzLnBhZ2UucGFnZVNpemUgPSBfLmdldChyZXMsICJkYXRhLmRhdGEucGVyX3BhZ2UiKTsKICAgICAgICAgIHRoaXMucGFnZS50b3RhbCA9IF8uZ2V0KHJlcywgImRhdGEuZGF0YS50b3RhbCIpOwogICAgICAgICAgbGV0IGZyb20gPSBfLmdldChyZXMsICJkYXRhLmRhdGEuZnJvbSIsIDApOwogICAgICAgICAgbGV0IHRvID0gXy5nZXQocmVzLCAiZGF0YS5kYXRhLnRvIiwgMCk7CiAgICAgICAgICB0aGlzLnBhZ2UuZnJvbSA9IGZyb20gPyBmcm9tIDogMDsKICAgICAgICAgIHRoaXMucGFnZS50byA9IHRvID8gdG8gOiAwOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0T3JpZ2luYWxQcmljZSgpIHsKICAgICAgdGhpcy5mb3JtLm9yaWdpbmFsX3ByaWNlID0gZm9ybWF0TW9uZXkodGhpcy5mb3JtLm9yaWdpbmFsX3ByaWNlKTsKICAgIH0sCiAgICBmb3JtYXRTYWxlUHJpY2UoKSB7CiAgICAgIHRoaXMuZm9ybS5zYWxlX3ByaWNlID0gZm9ybWF0TW9uZXkodGhpcy5mb3JtLnNhbGVfcHJpY2UpOwogICAgfSwKICAgIGZvcm1hdFdlaWdodCgpIHsKICAgICAgdGhpcy5mb3JtLndlaWdodCA9IGZvcm1hdE1vbmV5KHRoaXMuZm9ybS53ZWlnaHQpOwogICAgfSwKICAgIGZvcm1hdFF1YW50aXR5KCkgewogICAgICB0aGlzLmZvcm0ucXVhbnRpdHlfaW5fc3RvY2sgPSBmb3JtYXRNb25leSh0aGlzLmZvcm0ucXVhbnRpdHlfaW5fc3RvY2spOwogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZVN0cmluZykgewogICAgICByZXR1cm4gbW9tZW50KGRhdGVTdHJpbmcpLmZvcm1hdCgiSEg6bW0gREQvTU0vWVlZWSIpOwogICAgfSwKICAgIGZvcm1hdFF1YW50aXR5SW1wb3J0KCkgewogICAgICB0aGlzLmZvcm1JbXBvcnQucXVhbnRpdHkgPSBmb3JtYXRNb25leSh0aGlzLmZvcm1JbXBvcnQucXVhbnRpdHkpOwogICAgfSwKICAgIEltcG9ydFByb2R1Y3QocHJvZHVjdCkgewogICAgICB0aGlzLmRpYWxvZ0ltcG9ydCA9IHRydWUKICAgICAgdGhpcy5za3VJbXBvcnQgPSBwcm9kdWN0LnNrdQogICAgICB0aGlzLm5hbWVJbXBvcnQgPSBwcm9kdWN0Lm5hbWUKICAgICAgdGhpcy5pZEltcG9ydCA9IHByb2R1Y3QuX2lkCiAgICB9LAogICAgaGFuZGxlSW1wb3J0UHJvZHVjdChmb3JtSW1wb3J0UHJvZHVjdCkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1JbXBvcnRQcm9kdWN0XS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICBxdWFudGl0eTogZm9ybWF0U3RyaW5ndG9OdW1iZXIodGhpcy5mb3JtSW1wb3J0LnF1YW50aXR5KQogICAgICAgICAgfQogICAgICAgICAgYXBpLmltcG9ydFByb2R1Y3QodGhpcy5pZEltcG9ydCwgZGF0YSkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKQogICAgICAgICAgICB0aGlzLmRpYWxvZ0ltcG9ydCA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICJOaOG6rXAgaMOgbmcgdGjDoG5oIGPDtG5nISIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaCgoZXJyb3JzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JRdWFudGl0eSA9IGVycm9ycy5yZXNwb25zZS5kYXRhLmVycm9yLnF1YW50aXR5WzBdCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBwcm9kdWN0RGV0YWlsKGlkKSB7CiAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgIT09ICJQcm9kdWN0RGV0YWlsIikgewogICAgICAgIHJldHVybiByb3V0ZXIucHVzaCh7IG5hbWU6ICJQcm9kdWN0RGV0YWlsIiwgcXVlcnk6IHtpZDogaWR9IH0pOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZGlhbG9nQWRkUHJvZHVjdCh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgdGhpcy5uZXdQcm9kdWN0VXBsb2FkSW1hZ2UgPSAiIjsKICAgICAgICB0aGlzLm5ld1Byb2R1Y3RJbWFnZVVybCA9ICIiOwogICAgICAgIHRoaXMuJHJlZnMuZm9ybUFkZFByb2R1Y3QucmVzZXRGaWVsZHMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ubmFtZSA9ICIiOwogICAgICAgIHRoaXMuZm9ybS5za3UgPSAiIjsKICAgICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlfaWRzID0gW107CiAgICAgICAgdGhpcy5mb3JtLm9yaWdpbmFsX3ByaWNlID0gIiI7CiAgICAgICAgdGhpcy5mb3JtLnNhbGVfcHJpY2UgPSAiIjsKICAgICAgICB0aGlzLmZvcm0ud2VpZ2h0ID0gIiI7CiAgICAgICAgdGhpcy5mb3JtLnF1YW50aXR5X2luX3N0b2NrID0gIiI7CiAgICAgICAgdGhpcy5mb3JtLmRlc2NyaXB0aW9uID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBkaWFsb2dFZGl0UHJvZHVjdCh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgdGhpcy5uZXdQcm9kdWN0VXBsb2FkSW1hZ2UgPSAiIjsKICAgICAgICB0aGlzLm5ld1Byb2R1Y3RJbWFnZVVybCA9ICIiOwogICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm1BZGRQcm9kdWN0KSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1BZGRQcm9kdWN0LnJlc2V0RmllbGRzKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGlhbG9nSW1wb3J0KHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm1JbXBvcnRQcm9kdWN0KSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1JbXBvcnRQcm9kdWN0LnJlc2V0RmllbGRzKCk7CiAgICAgICAgICB0aGlzLmVycm9yUXVhbnRpdHkgPSAiIgogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2hhbmdlUGFnZVRpdGxlKCk7CiAgICB0aGlzLmNoYW5nZUluZGV4U2lkZWJhcigpOwogICAgdGhpcy5nZXREYXRhKCk7CiAgICBhcGkuZ2V0RGF0YUNhdGVnb3JpZXMoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICB0aGlzLmNhdGVnb3JpZXMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["Products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAymBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Products.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"products\">\n    <el-card>\n      <el-row :gutter=\"20\" class=\"head-product\">\n        <el-col :sm=\"12\" :md=\"11\" class=\"search\">\n          <el-input\n            class=\"search-input\"\n            placeholder=\"Nhập tên sản phẩm hoặc SKU để tìm kiếm\"\n            v-model=\"search\"\n            prefix-icon=\"el-icon-search\"\n            clearable\n            @clear=\"handleSearch\"\n            @keydown.enter.native=\"handleSearch\"\n          ></el-input>\n          <el-button class=\"btn-search\" @click=\"handleSearch\">Tìm kiếm</el-button>\n           <el-button\n            @click=\"handleSearch\"\n            style=\"margin-left: 15px\"\n            class=\"search-glass\"\n            ><i class=\"fa fa-search\"></i\n          ></el-button>\n        </el-col>\n        <el-col :sm=\"12\" :md=\"5\">\n          <el-select\n            placeholder=\"Nhóm sản phẩm\"\n            class=\"search-select\"\n            v-model=\"categoryFilter\"\n            @change=\"handleSearch\"\n            clearable\n            @clear=\"handleSearch\"\n          >\n            <el-option\n              v-for=\"category in categories\"\n              :key=\"category._id\"\n              :value=\"category._id\"\n              :label=\"category.name\"\n              >{{ category.name }}\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :sm=\"24\" :md=\"8\" class=\"button-add\">\n          <el-button\n            class=\"show-card\"\n            type=\"primary\"\n            @click=\"dialogAddProduct = true\"\n            ><i class=\"fa fa-plus\"></i> Thêm mới</el-button\n          >\n          <el-button class=\"show-card\" type=\"success\" @click=\"openDialogExcel\"\n            ><i class=\"fa fa-upload\"></i> Nhập Excel</el-button\n          >\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-card class=\"table-product\">\n      <el-table\n        :data=\"products\"\n        stripe\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n        height=\"calc(100vh - 345px)\"\n      >\n        <el-table-column prop=\"image\" label=\"Ảnh\" width=\"100px\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <img\n              class=\"product-image\"\n              v-if=\"scope.row.image\"\n              :src=\"baseUrl + scope.row.image\"\n              alt=\"\"\n            />\n            <img\n              class=\"product-image\"\n              v-else\n              src=\"../assets/images/product.jpg\"\n              alt=\"\"\n            />\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"sku\" label=\"SKU\">\n          <template slot-scope=\"scope\">\n            <el-link type=\"primary\" @click=\"productDetail(scope.row._id)\">{{scope.row.sku}}</el-link>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"Tên sản phẩm\"> </el-table-column>\n        <el-table-column prop=\"categories\" label=\"Nhóm sản phẩm\">\n          <template slot-scope=\"scope\">\n            <a\n              v-for=\"(category, index) in scope.row.categories\"\n              :key=\"category._id\"\n            >\n              <b\n                >{{ category.name\n                }}<span v-if=\"index + 1 != scope.row.categories.length\"\n                  >,\n                </span></b\n              >\n            </a>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"quantity_in_stock\"\n          label=\"Tồn kho\"\n          align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            {{ Number(scope.row.quantity_in_stock).toLocaleString(\"vi-VN\") }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"sale_price\" label=\"Giá bán\">\n          <template slot-scope=\"scope\">\n            {{ Number(scope.row.sale_price).toLocaleString(\"vi-VN\") }} VNĐ\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"original_price\" label=\"Giá nhập\">\n          <template slot-scope=\"scope\">\n            {{ Number(scope.row.original_price).toLocaleString(\"vi-VN\") }} VNĐ\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Khối lượng\" align=\"center\">\n          <template slot-scope=\"scope\"> {{ scope.row.weight }} g </template>\n        </el-table-column>\n\n        <el-table-column prop=\"created_at\" label=\"Ngày tạo\" align=\"left\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.created_at) }}\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Hành động\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-popover placement=\"bottom\" width=\"100\" trigger=\"click\">\n              <div class=\"product-action\" @click=\"editProduct(scope.row)\">\n                <i class=\"fa fa-pencil\"></i> Chỉnh sửa\n              </div>\n              <div class=\"product-action\" @click=\"ImportProduct(scope.row)\">\n                <i class=\"fa fa-plus\" aria-hidden=\"true\"></i> Nhập hàng\n              </div>\n              <div class=\"product-action\" @click=\"productDetail(scope.row._id)\">\n                <i class=\"fa fa-eye\" aria-hidden=\"true\"></i>Xem chi tiết\n              </div>\n              <div\n                class=\"product-action\"\n                @click=\"handleDeleteProduct(scope.row._id)\"\n              >\n                <i class=\"fa fa-trash\"></i> Xóa\n              </div>\n              <div class=\"btn-edit\" slot=\"reference\">\n                <i class=\"fa fa-ellipsis-v\"></i>\n              </div>\n            </el-popover>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-row class=\"paginationWarp\">\n        <el-col :sm=\"10\">\n          <div class=\"textInfo\">\n            <p>\n              Số lượng kết quả: {{ page.from }} - {{ page.to }} của\n              {{ page.total }}\n            </p>\n          </div>\n        </el-col>\n        <el-col class=\"page-responsive\" :sm=\"14\">\n          <el-pagination\n            background\n            layout=\"prev, pager, next\"\n            :total=\"page.total\"\n            :page-size=\"page.pageSize\"\n            :current-page=\"page.currentPage\"\n            @current-change=\"handleChangePage\"\n          >\n          </el-pagination>\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-dialog\n      id=\"add-product-dialog\"\n      class=\"dialog-add-product\"\n      title=\"Thêm sản phẩm\"\n      top=\"5vh\"\n      :visible.sync=\"dialogAddProduct\"\n    >\n      <el-row>\n        <el-col :md=\"12\">\n          <div class=\"add-product-image-title\">Ảnh sản phẩm</div>\n          <div class=\"add-product-image\">\n            <div class=\"product-image\">\n              <label\n                for=\"product-input\"\n                @mouseover=\"hoverImage\"\n                @mouseleave=\"hoverLeaveImage\"\n              >\n                <div class=\"productHover\" ref=\"productHover\">\n                  <i class=\"fa fa-pencil\"></i>\n                </div>\n                <img\n                  v-if=\"newProductImageUrl\"\n                  :src=\"newProductImageUrl\"\n                  alt=\"\"\n                />\n                <img v-else src=\"../assets/images/product.jpg\" alt=\"\" />\n              </label>\n              <input\n                ref=\"productImage\"\n                type=\"file\"\n                accept=\"image/*\"\n                id=\"product-input\"\n                @change=\"handleChangeImage\"\n              />\n              <center>\n                <div\n                  v-if=\"newProductImageUrl\"\n                  class=\"delete-product-image\"\n                  @click=\"deleteImage\"\n                >\n                  Xóa ảnh\n                </div>\n              </center>\n            </div>\n          </div>\n        </el-col>\n        <el-col :md=\"12\">\n          <el-form\n            class=\"form-product\"\n            :model=\"form\"\n            :rules=\"rules\"\n            ref=\"formAddProduct\"\n            label-position=\"top\"\n            hide-required-asterisk\n            label-width=\"130px\"\n            size=\"small\"\n          >\n            <el-row>\n              <el-col :span=\"24\" class=\"margin-input\">\n                <el-form-item prop=\"name\">\n                  <label class=\"label-product\"\n                    >Tên sản phẩm <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.name\"\n                    autocomplete=\"off\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item prop=\"sku\">\n                  <label class=\"label-product\"\n                    >SKU <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.sku\"\n                    autocomplete=\"off\"\n                    ref=\"inputSku\"\n                    class=\"input-sku\"\n                  ></el-input>\n                  <div v-if=\"this.errorSku !== ''\" class=\"error\">\n                    <span> {{ errorSku }} </span>\n                  </div>\n                </el-form-item>\n                <el-form-item>\n                  <el-row :gutter=\"20\">\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"original_price\">\n                        <label class=\"label-product\"\n                          >Giá nhập <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.original_price\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatOriginalPrice\"\n                        >\n                          <template slot=\"append\">VNĐ</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\" :gutter=\"40\">\n                      <el-form-item prop=\"sale_price\">\n                        <label class=\"label-product\"\n                          >Giá bán <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.sale_price\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatSalePrice\"\n                        >\n                          <template slot=\"append\">VNĐ</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"quantity_in_stock\">\n                        <label class=\"label-product\"\n                          >Tồn kho <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          type=\"text\"\n                          size=\"medium\"\n                          v-model=\"form.quantity_in_stock\"\n                          autocomplete=\"off\"\n                          @input=\"formatQuantity\"\n                        ></el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"weight\">\n                        <label class=\"label-product\">Khối lượng</label>\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.weight\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatWeight\"\n                        >\n                          <template slot=\"append\">gam</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n                </el-form-item>\n                <el-form-item prop=\"category_ids\">\n                  <label class=\"label-product\">Nhóm sản phẩm</label>\n                  <el-select\n                    class=\"select-categories\"\n                    v-model=\"form.category_ids\"\n                    placeholder=\"\"\n                    size=\"medium\"\n                    multiple\n                    filterable\n                  >\n                    <el-option\n                      v-for=\"category in categories\"\n                      :key=\"category._id\"\n                      :label=\"category.name\"\n                      :value=\"category._id\"\n                      >{{ category.name }}</el-option\n                    >\n                  </el-select>\n                </el-form-item>\n                <el-form-item prop=\"description\">\n                  <label class=\"label-product\">Mô tả</label>\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.description\"\n                    :autosize=\"{ minRows: 4, maxRows: 6 }\"\n                    autocomplete=\"off\"\n                    type=\"textarea\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-form>\n        </el-col>\n      </el-row>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeAddProduct\">Hủy</el-button>\n        <el-button type=\"primary\" @click=\"storeProduct('formAddProduct')\"\n          >Lưu</el-button\n        >\n      </span>\n    </el-dialog>\n    <el-dialog\n      id=\"add-product-dialog\"\n      class=\"dialog-add-product\"\n      title=\"Chỉnh sửa sản phẩm\"\n      top=\"5vh\"\n      :visible.sync=\"dialogEditProduct\"\n    >\n      <el-row>\n        <el-col :md=\"12\">\n          <div class=\"add-product-image-title\">Ảnh sản phẩm</div>\n          <div class=\"add-product-image\">\n            <div class=\"product-image\">\n              <label for=\"product-edit-input\">\n                <img\n                  v-if=\"newProductImageUrl\"\n                  :src=\"newProductImageUrl\"\n                  alt=\"\"\n                />\n                <img v-else src=\"../assets/images/product.jpg\" alt=\"\" />\n              </label>\n              <input\n                ref=\"productImage\"\n                type=\"file\"\n                accept=\"image/*\"\n                id=\"product-edit-input\"\n                @change=\"handleChangeImage\"\n              />\n            </div>\n          </div>\n        </el-col>\n        <el-col :md=\"12\">\n          <el-form\n            class=\"form-product\"\n            :model=\"form\"\n            :rules=\"rules\"\n            ref=\"formEditProduct\"\n            label-position=\"top\"\n            hide-required-asterisk\n            label-width=\"130px\"\n            size=\"small\"\n          >\n            <el-row>\n              <el-col :span=\"24\" class=\"margin-input\">\n                <el-form-item prop=\"name\">\n                  <label class=\"label-product\"\n                    >Tên sản phẩm <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.name\"\n                    autocomplete=\"off\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item prop=\"sku\">\n                  <label class=\"label-product\"\n                    >SKU <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.sku\"\n                    autocomplete=\"off\"\n                  ></el-input>\n                  <div v-if=\"this.errorSku !== ''\" class=\"error\">\n                    <span> {{ errorSku }} </span>\n                  </div>\n                </el-form-item>\n                <el-form-item>\n                  <el-row :gutter=\"20\">\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"original_price\">\n                        <label class=\"label-product\"\n                          >Giá nhập <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.original_price\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatOriginalPrice\"\n                        >\n                          <template slot=\"append\">VNĐ</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\" :gutter=\"40\">\n                      <el-form-item prop=\"sale_price\">\n                        <label class=\"label-product\"\n                          >Giá bán <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.sale_price\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatSalePrice\"\n                        >\n                          <template slot=\"append\">VNĐ</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"quantity_in_stock\">\n                        <label class=\"label-product\"\n                          >Tồn kho <span class=\"required\"> *</span></label\n                        >\n                        <el-input\n                          type=\"text\"\n                          size=\"medium\"\n                          v-model=\"form.quantity_in_stock\"\n                          autocomplete=\"off\"\n                          @input=\"formatQuantity\"\n                        ></el-input>\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item prop=\"weight\">\n                        <label class=\"label-product\">Khối lượng</label>\n                        <el-input\n                          size=\"medium\"\n                          v-model=\"form.weight\"\n                          autocomplete=\"off\"\n                          type=\"text\"\n                          @input=\"formatWeight\"\n                        >\n                          <template slot=\"append\">gam</template>\n                        </el-input>\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n                </el-form-item>\n                <el-form-item prop=\"category_ids\">\n                  <label class=\"label-product\">Nhóm sản phẩm</label>\n                  <el-select\n                    class=\"select-categories\"\n                    v-model=\"form.category_ids\"\n                    placeholder=\"\"\n                    size=\"medium\"\n                    multiple\n                    filterable\n                  >\n                    <el-option\n                      v-for=\"category in categories\"\n                      :key=\"category._id\"\n                      :label=\"category.name\"\n                      :value=\"category._id\"\n                      >{{ category.name }}</el-option\n                    >\n                  </el-select>\n                </el-form-item>\n                <el-form-item prop=\"description\">\n                  <label class=\"label-product\">Mô tả</label>\n                  <el-input\n                    size=\"medium\"\n                    v-model=\"form.description\"\n                    :autosize=\"{ minRows: 4, maxRows: 6 }\"\n                    autocomplete=\"off\"\n                    type=\"textarea\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-form>\n        </el-col>\n      </el-row>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeEditProduct\">Hủy</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"handleUpdateProduct('formEditProduct')\"\n          >Lưu</el-button\n        >\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      id=\"excel-product\"\n      title=\"Nhập Excel\"\n      :visible.sync=\"dialogExcel\"\n      @close=\"closeImport\"\n    >\n      <div class=\"subDownload\">\n        <p>\n          Vui lòng tải lên tệp theo mẫu sau:\n          <a href=\"#\" @click=\"downloadExelTemplate\"\n            ><i class=\"el-icon-download\"></i> Tải xuống tệp mẫu</a\n          >\n        </p>\n      </div>\n      <div class=\"upload-excel\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\" v-html=\"uploadText\"></div>\n        <input type=\"file\" @change=\"changeFile\" />\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeDailogExcel\">Đóng</el-button>\n        <el-button type=\"primary\" @click=\"importExcel\"\n          ><i class=\"el-icon-upload2\"></i> Tải lên</el-button\n        >\n      </span>\n    </el-dialog>\n    <el-dialog\n        id=\"add-quantini-product\"\n        title=\"Nhập hàng\"\n        :visible.sync=\"dialogImport\"\n        class=\"dialog-add-product\"\n    >\n     <div class=\"import-info\">\n        <span>Tên sản phẩm: </span>\n        <h1 class=\"import-sku\">{{nameImport}}</h1>\n      </div>\n      <div class=\"import-info\">\n        <span>SKU: </span>\n        <h1 class=\"import-sku\">{{skuImport}}</h1>\n      </div>\n      <el-form\n          class=\"form-product\"\n          :model=\"formImport\"\n          :rules=\"rulesImport\"\n          label-position=\"top\"\n          hide-required-asterisk\n          label-width=\"130px\"\n          size=\"small\"\n          ref=\"formImportProduct\"\n      >\n        <el-row>\n          <el-col :span=\"24\" class=\"margin-input\">\n            <el-form-item prop=\"quantity\">\n              <label class=\"label-product\"\n              >Số lượng nhập <span class=\"required\"> *</span></label\n              >\n              <el-input\n                  type=\"text\"\n                  size=\"medium\"\n                  v-model=\"formImport.quantity\"\n                  autocomplete=\"off\"\n                  @input=\"formatQuantityImport\"\n              ></el-input>\n              <div v-if=\"this.errorQuantity !== ''\" class=\"error-quantity\">\n                <span> {{ errorQuantity }} </span>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogImport = false\">Đóng</el-button>\n        <el-button type=\"primary\" @click=\"handleImportProduct('formImportProduct')\">Nhập hàng</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from \"../api\";\nimport { mapMutations } from \"vuex\";\nimport { formatMoney, formatStringtoNumber } from \"@/utils/helper\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport router from \"@/router\";\nexport default {\n  name: \"Products\",\n  data() {\n    var validateSalePrice = (rule, value, callback) => {\n      if (\n        value &&\n        this.form.original_price &&\n        formatStringtoNumber(value) <\n          formatStringtoNumber(this.form.original_price)\n      ) {\n        callback(new Error(\"Giá bán phải lớn hơn hoặc bằng giá nhập\"));\n      } else {\n        callback();\n      }\n    };\n    var validateOriginPrice = (rule, value, callback) => {\n      if (\n        value &&\n        this.form.sale_price &&\n        formatStringtoNumber(value) > formatStringtoNumber(this.form.sale_price)\n      ) {\n        callback(new Error(\"Giá nhập phải nhỏ hơn hoặc bằng giá bán\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      uploadText: \"\",\n      file: \"\",\n      search: \"\",\n      products: [],\n      dialogAddProduct: false,\n      dialogEditProduct: false,\n      dialogExcel: false,\n      form: {\n        name: \"\",\n        sku: \"\",\n        image: \"\",\n        description: \"\",\n        category_ids: [],\n        weight: \"\",\n        sale_price: \"\",\n        original_price: \"\",\n        quantity_in_stock: \"\",\n      },\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"Tên sản phẩm không được bỏ trống!\",\n            trigger: \"change\",\n          },\n        ],\n        sku: [\n          {\n            required: true,\n            message: \"Mã sản phẩm không được bỏ trống!\",\n            trigger: \"change\",\n          },\n        ],\n        sale_price: [\n          {\n            required: true,\n            message: \"Giá bán không được bỏ trống!\",\n            trigger: \"change\",\n          },\n          {\n            validator: validateSalePrice,\n            trigger: \"change\",\n          },\n        ],\n        original_price: [\n          {\n            required: true,\n            message: \"Giá nhập không được bỏ trống!\",\n            trigger: \"change\",\n          },\n          {\n            validator: validateOriginPrice,\n            trigger: \"change\",\n          },\n        ],\n        quantity_in_stock: [\n          {\n            required: true,\n            message: \"Nhập số lượng sản phẩm\",\n            trigger: \"change\",\n          },\n        ],\n      },\n      newProductImageUrl: \"\",\n      newProductUploadImage: \"\",\n      baseUrl: process.env.VUE_APP_BASE_URL + \"/storage/\",\n      productEditId: \"\",\n      categories: [],\n\n      loading: true,\n      page: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0,\n        from: 0,\n        to: 0,\n      },\n      categoryFilter: \"\",\n      errorSku: \"\",\n      errorQuantity: \"\",\n      dialogImport: false,\n      skuImport: '',\n      nameImport: '',\n      idImport: '',\n      formImport: {\n        quantity: ''\n      },\n      rulesImport: {\n        quantity: [\n          {\n            required: true,\n            message: \"Nhập số lượng sản phẩm\",\n            trigger: \"change\",\n          },\n        ]\n      }\n    };\n  },\n  methods: {\n    ...mapMutations([\"updateTitle\", \"updateSideBar\"]),\n    changePageTitle() {\n      this.updateTitle(\"Danh sách sản phẩm\");\n    },\n    changeIndexSidebar() {\n      this.updateSideBar(\"3\");\n    },\n    openDialogExcel() {\n      this.dialogExcel = true;\n      this.uploadText =\n        \"Thả tệp vào đây hoặc <em style='color: #409EFF; font-style: normal;'>bấm đê tải tệp lên</em>\";\n    },\n    closeDailogExcel() {\n      this.dialogExcel = false;\n    },\n    //download file excel mau\n    downloadExelTemplate() {\n      api.dowloadExcelTemplate().then((response) => {\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", \"Danh sách sản phẩm mẫu.xlsx\");\n        document.body.appendChild(link);\n        link.click();\n      });\n    },\n    //upload file excel\n    importExcel() {\n      const frmData = new FormData();\n      frmData.append(\"file\", this.file);\n      api.importProductExcel(frmData).then(() => {\n        this.dialogExcel = false;\n        this.$message({\n          type: \"success\",\n          message: \"Nhập thành công\",\n          center: true,\n        });\n      });\n      this.getData();\n    },\n    changeFile(e) {\n      this.file = e.target.files[0];\n      this.uploadText = \"Đã chọn 1 file: \" + this.file.name;\n    },\n    closeImport() {\n      this.file = null;\n    },\n    hoverImage() {\n      this.$refs.productHover.style.display = \"flex\";\n    },\n    hoverLeaveImage() {\n      this.$refs.productHover.style.display = \"none\";\n    },\n    handleChangeImage(e) {\n      if (e.target.files.length) {\n        this.newProductUploadImage = e.target.files[0];\n        this.newProductImageUrl = URL.createObjectURL(e.target.files[0]);\n      }\n    },\n    deleteImage() {\n      this.newProductUploadImage = \"\";\n      this.newProductImageUrl = \"\";\n    },\n    storeProduct(formAddProduct) {\n      this.$refs[formAddProduct].validate((valid) => {\n        if (valid) {\n          const frmData = new FormData();\n          frmData.append(\"name\", this.form.name);\n          frmData.append(\"sku\", this.form.sku);\n          frmData.append(\"category_ids\", this.form.category_ids);\n          frmData.append(\n            \"original_price\",\n            formatStringtoNumber(this.form.original_price)\n          );\n          frmData.append(\n            \"sale_price\",\n            formatStringtoNumber(this.form.sale_price)\n          );\n          if (this.form.weight) {\n            frmData.append(\"weight\", formatStringtoNumber(this.form.weight));\n          } else {\n            frmData.append(\"weight\", 0);\n          }\n          frmData.append(\n            \"quantity_in_stock\",\n            formatStringtoNumber(this.form.quantity_in_stock)\n          );\n          frmData.append(\"description\", this.form.description);\n          if (this.newProductUploadImage) {\n            frmData.append(\"image\", this.newProductUploadImage);\n          }\n          this.loading = true;\n          api\n            .addProduct(frmData)\n            .then(() => {\n              this.newProductUploadImage = \"\";\n              this.newProductImageUrl = \"\";\n              this.$message({\n                message: \"Thêm mới thành công!\",\n                type: \"success\",\n              });\n              this.errorSku = \"\"\n              this.dialogAddProduct = false;\n              this.getData();\n            }).catch((error) => {\n              let errors = _.get(error.response, \"data.error\", {});\n              if (Object.keys(errors).length === 0) {\n                this.$message.error({\n                  type: \"error\",\n                  message: _.get(error.response, \"data.message\", \"\"),\n                });\n              }\n              if (Object.keys(errors).length > 0) {\n                this.errorSku = _.get(errors, \"sku[0]\", \"\");\n              }\n              this.loading = false;\n            });\n        }\n      });\n    },\n    closeAddProduct() {\n      this.dialogAddProduct = false;\n      this.errorSku = \"\";\n    },\n    editProduct(product) {\n      this.dialogEditProduct = true;\n      this.productEditId = product._id;\n      this.form.name = product.name;\n      this.form.sku = product.sku;\n      if (product.category_ids) {\n        this.form.category_ids = product.category_ids;\n      }\n      this.form.original_price = formatMoney(product.original_price.toString());\n      this.form.sale_price = formatMoney(product.sale_price.toString());\n      this.form.weight = formatMoney(product.weight.toString());\n      this.form.quantity_in_stock = formatMoney(\n        product.quantity_in_stock.toString()\n      );\n      if (product.description != null) {\n        this.form.description = product.description;\n      }\n      if (product.image) {\n        this.newProductImageUrl = this.baseUrl + product.image;\n      }\n    },\n    handleUpdateProduct(formEditProduct) {\n      this.$refs[formEditProduct].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          const frmData = new FormData();\n          frmData.append(\"name\", this.form.name);\n          frmData.append(\"sku\", this.form.sku);\n          frmData.append(\"category_ids\", this.form.category_ids);\n          frmData.append(\n            \"original_price\",\n            formatStringtoNumber(this.form.original_price)\n          );\n          frmData.append(\n            \"sale_price\",\n            formatStringtoNumber(this.form.sale_price)\n          );\n          if (this.form.weight) {\n            frmData.append(\"weight\", formatStringtoNumber(this.form.weight));\n          } else {\n            frmData.append(\"weight\", 0);\n          }\n          frmData.append(\n            \"quantity_in_stock\",\n            formatStringtoNumber(this.form.quantity_in_stock)\n          );\n          frmData.append(\"description\", this.form.description);\n          if (this.newProductUploadImage) {\n            frmData.append(\"image\", this.newProductUploadImage);\n          }\n          api.updateProduct(this.productEditId, frmData).then(() => {\n              this.newProductUploadImage = \"\";\n              this.newProductImageUrl = \"\";\n              this.$message({\n                message: \"Cập nhật thành công.\",\n                type: \"success\",\n                center: true,\n              });\n              this.errorSku = \"\"\n              this.dialogEditProduct = false;\n              let params = {\n                page: this.page.currentPage,\n                q: this.search,\n                category_id: this.categoryFilter,\n              };\n              api.getDataProducts(params)\n                .then((response) => {\n                  this.products = response.data.data.data;\n                  this.loading = false;\n                })\n                .catch(() => {\n                  this.loading = false;\n                });\n            }).catch((error) => {\n              let errors = _.get(error.response, \"data.error\", {});\n              if (Object.keys(errors).length === 0) {\n                this.$message.error({\n                  type: \"error\",\n                  message: _.get(error.response, \"data.message\", \"\"),\n                });\n              }\n              if (Object.keys(errors).length > 0) {\n                this.errorSku = _.get(errors, \"sku[0]\", \"\");\n              }\n              this.loading = false;\n            });\n        }\n      });\n    },\n    closeEditProduct() {\n      this.errorSku = \"\"\n      this.dialogEditProduct = false;\n    },\n    handleDeleteProduct(id) {\n      this.$confirm(\"Bạn có chắc chắn muốn xóa sản phẩm này?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Hủy\",\n        confirmButtonClass: \"btn-delete-list\",\n        type: \"warning\",\n      }).then(() => {\n        this.loading = true;\n        api\n          .deleteProduct(id)\n          .then(() => {\n            this.$message({\n              message: \"Xóa sản phẩm thành công!\",\n              type: \"success\",\n              center: true,\n            });\n            let params = {\n              page: this.page.currentPage,\n              q: this.search,\n              category_id: this.categoryFilter,\n            };\n            api\n              .getDataProducts(params)\n              .then((response) => {\n                this.products = response.data.data.data;\n                this.page.total = response.data.data.total;\n                let from = _.get(response, \"data.data.from\", 0);\n                let to = _.get(response, \"data.data.to\", 0);\n                this.page.from = from ? from : 0;\n                this.page.to = to ? to : 0;\n                this.loading = false;\n              })\n              .catch(() => {\n                this.loading = false;\n              });\n          })\n          .catch(() => {\n            this.$message({\n              message: \"Xóa sản phẩm thất bại!\",\n              type: \"error\",\n              center: true,\n            });\n            this.loading = false;\n          });\n      });\n    },\n    handleChangePage(val) {\n      let payload = {\n        page: val,\n        q: this.search,\n        category_id: this.categoryFilter,\n      };\n      this.getData(payload);\n    },\n    handleSearch() {\n      let params = {\n        q: this.search,\n        category_id: this.categoryFilter,\n      };\n      this.getData(params);\n    },\n    getData(params = {}) {\n      this.loading = true;\n      api\n        .getDataProducts(params)\n        .then((res) => {\n          this.products = res.data.data.data;\n\n          this.total = res.data.data.total;\n          this.page.currentPage = _.get(res, \"data.data.current_page\");\n          this.page.pageSize = _.get(res, \"data.data.per_page\");\n          this.page.total = _.get(res, \"data.data.total\");\n          let from = _.get(res, \"data.data.from\", 0);\n          let to = _.get(res, \"data.data.to\", 0);\n          this.page.from = from ? from : 0;\n          this.page.to = to ? to : 0;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        });\n    },\n    formatOriginalPrice() {\n      this.form.original_price = formatMoney(this.form.original_price);\n    },\n    formatSalePrice() {\n      this.form.sale_price = formatMoney(this.form.sale_price);\n    },\n    formatWeight() {\n      this.form.weight = formatMoney(this.form.weight);\n    },\n    formatQuantity() {\n      this.form.quantity_in_stock = formatMoney(this.form.quantity_in_stock);\n    },\n    formatDate(dateString) {\n      return moment(dateString).format(\"HH:mm DD/MM/YYYY\");\n    },\n    formatQuantityImport() {\n      this.formImport.quantity = formatMoney(this.formImport.quantity);\n    },\n    ImportProduct(product) {\n      this.dialogImport = true\n      this.skuImport = product.sku\n      this.nameImport = product.name\n      this.idImport = product._id\n    },\n    handleImportProduct(formImportProduct) {\n      this.$refs[formImportProduct].validate((valid) => {\n        if (valid) {\n          let data = {\n            quantity: formatStringtoNumber(this.formImport.quantity)\n          }\n          api.importProduct(this.idImport, data)\n          .then(() => {\n            this.handleSearch()\n            this.dialogImport = false\n            this.$message({\n              message: \"Nhập hàng thành công!\",\n              type: \"success\",\n              center: true,\n            });\n          }).catch((errors) => {\n            this.errorQuantity = errors.response.data.error.quantity[0]\n          })\n        }\n      })\n    },\n    productDetail(id) {\n      if (router.currentRoute.name !== \"ProductDetail\") {\n        return router.push({ name: \"ProductDetail\", query: {id: id} });\n      }\n    }\n  },\n  watch: {\n    dialogAddProduct(value) {\n      if (!value) {\n        this.newProductUploadImage = \"\";\n        this.newProductImageUrl = \"\";\n        this.$refs.formAddProduct.resetFields();\n      } else {\n        this.form.name = \"\";\n        this.form.sku = \"\";\n        this.form.category_ids = [];\n        this.form.original_price = \"\";\n        this.form.sale_price = \"\";\n        this.form.weight = \"\";\n        this.form.quantity_in_stock = \"\";\n        this.form.description = \"\";\n      }\n    },\n    dialogEditProduct(value) {\n      if (!value) {\n        this.newProductUploadImage = \"\";\n        this.newProductImageUrl = \"\";\n        if (this.$refs.formAddProduct) {\n          this.$refs.formAddProduct.resetFields();\n        }\n      }\n    },\n    dialogImport(value) {\n      if (value) {\n        if (this.$refs.formImportProduct) {\n          this.$refs.formImportProduct.resetFields();\n          this.errorQuantity = \"\"\n        }\n      }\n    }\n  },\n  mounted() {\n    this.changePageTitle();\n    this.changeIndexSidebar();\n    this.getData();\n    api.getDataCategories().then((response) => {\n      this.categories = response.data.data;\n    });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/styles/variables\";\n@import \"../assets/styles/products\";\n</style>\n"]}]}