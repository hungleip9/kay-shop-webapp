{"remainingRequest":"/home/hunglq/Documents/kay-shop-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hunglq/Documents/kay-shop-webapp/src/views/Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hunglq/Documents/kay-shop-webapp/src/views/Role.vue","mtime":1620027224741},{"path":"/home/hunglq/Documents/kay-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/Documents/kay-shop-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hunglq/Documents/kay-shop-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hunglq/Documents/kay-shop-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAiLi4vYXBpIjsKaW1wb3J0IHsgbWFwTXV0YXRpb25zLCBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAiQC91dGlscy9oZWxwZXIiOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDdXN0b21lciIsCiAgcHJvcHM6IHsKICAgIG1zZzogU3RyaW5nLAogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJhdXRoIiwgWyJhdXRoVXNlciJdKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2g6ICIiLAogICAgICB0b3RhbDogMCwKICAgICAgZGlhbG9nQWRkUm9sZTogZmFsc2UsCiAgICAgIHJvbGVzOiBbXSwKICAgICAgcGFnZTogewogICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB0b3RhbDogMCwKICAgICAgICBmcm9tOiAwLAogICAgICAgIHRvOiAwLAogICAgICB9LAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJUw6puIGNo4bupYyB24bulIGtow7RuZyDEkcaw4bujYyBi4buPIHRy4buRbmchIiwKICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkaWFsb2dFZGl0Um9sZTogZmFsc2UsCiAgICAgIHJvbGVFZGl0SWQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKFsidXBkYXRlVGl0bGUiLCAidXBkYXRlU2lkZUJhciJdKSwKICAgIGNoYW5nZVBhZ2VUaXRsZSgpIHsKICAgICAgdGhpcy51cGRhdGVUaXRsZSgiVmFpIHRyw7IgbmjDom4gdmnDqm4iKTsKICAgIH0sCiAgICBjaGFuZ2VJbmRleFNpZGViYXIoKSB7CiAgICAgIHRoaXMudXBkYXRlU2lkZUJhcigiNyIpOwogICAgfSwKICAgIGZvcm1hdERhdGVDcmVhdGVkKGRhdGVTdHJpbmcpIHsKICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZVN0cmluZyk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKQogICAgfSwKICAgIGdldERhdGEocGFyYW1zID0ge30pIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBhcGkuZ2V0RGF0YVJvbGVzKHBhcmFtcykudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5yb2xlcyA9IF8uZ2V0KHJlcywgJ2RhdGEuZGF0YS5kYXRhJykKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnBhZ2UuY3VycmVudFBhZ2UgPSBfLmdldChyZXMsICdkYXRhLmRhdGEuY3VycmVudF9wYWdlJykKICAgICAgICB0aGlzLnBhZ2UucGFnZVNpemUgPSBfLmdldChyZXMsICdkYXRhLmRhdGEucGVyX3BhZ2UnKQogICAgICAgIHRoaXMucGFnZS50b3RhbCA9IF8uZ2V0KHJlcywgJ2RhdGEuZGF0YS50b3RhbCcpCiAgICAgICAgbGV0IGZyb20gPSBfLmdldChyZXMsICdkYXRhLmRhdGEuZnJvbScsIDApCiAgICAgICAgbGV0IHRvID0gXy5nZXQocmVzLCAnZGF0YS5kYXRhLnRvJywgMCkKICAgICAgICB0aGlzLnBhZ2UuZnJvbSA9IGZyb20gPyBmcm9tIDogMAogICAgICAgIHRoaXMucGFnZS50byA9IHRvID8gdG8gOiAwCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgc3RvcmVSb2xlKGZvcm1BZGRSb2xlKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybUFkZFJvbGVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5mb3JtLmRlc2NyaXB0aW9uCiAgICAgICAgICB9CiAgICAgICAgICBhcGkuYWRkUm9sZShkYXRhKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dBZGRSb2xlID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5nZXREYXRhKCkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIlRow6ptIG3hu5tpIHRow6BuaCBjw7RuZyEiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VhcmNoKCkgewogICAgICBsZXQgcGF5bG9hZCA9IHsKICAgICAgICBwYWdlOiAxCiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VhcmNoLmxlbmd0aCA+IDApIHsKICAgICAgICBwYXlsb2FkLnEgPSB0aGlzLnNlYXJjaAogICAgICB9CiAgICAgIHRoaXMuZ2V0RGF0YShwYXlsb2FkKQogICAgfSwKICAgIGVkaXRSb2xlKHJvbGUpIHsKICAgICAgdGhpcy5kaWFsb2dFZGl0Um9sZSA9IHRydWUKICAgICAgdGhpcy5yb2xlRWRpdElkID0gcm9sZS5faWQKICAgICAgdGhpcy5mb3JtLm5hbWUgPSByb2xlLm5hbWUKICAgICAgdGhpcy5mb3JtLmRlc2NyaXB0aW9uID0gcm9sZS5kZXNjcmlwdGlvbgogICAgfSwKICAgIGhhbmRsZVVwZGF0ZVJvbGUoZm9ybUVkaXRSb2xlKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybUVkaXRSb2xlXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICBuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZm9ybS5kZXNjcmlwdGlvbgogICAgICAgICAgfQogICAgICAgICAgYXBpLnVwZGF0ZVJvbGUodGhpcy5yb2xlRWRpdElkLCBkYXRhKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dFZGl0Um9sZSA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIkPhuq1wIG5o4bqtdCB0aMOgbmggY8O0bmchIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAiQ+G6rXAgbmjhuq10IHRo4bqldCBi4bqhaSEiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZVJvbGUoaWQpIHsKICAgICAgdGhpcy4kY29uZmlybSgiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHjDs2EgdmFpIHRyw7IgbsOgeT8iLCAiQ+G6o25oIGLDoW8iLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJYw7NhIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAiSOG7p3kiLAogICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0bi1kZWxldGUtbGlzdCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBhcGkuZGVsZXRlUm9sZShpZCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCgpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIljDs2EgdGjDoG5oIGPDtG5nISIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAiWMOzYSB0aOG6pXQgYuG6oWkhIiwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgc2hvd1Blcm1pc3Npb25zKGlkKSB7CiAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgIT09ICJQZXJtaXNzaW9uIikgewogICAgICAgIHJldHVybiByb3V0ZXIucHVzaCh7IG5hbWU6ICJQZXJtaXNzaW9uIiwgcXVlcnk6IHtpZDogaWR9IH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5jaGFuZ2VQYWdlVGl0bGUoKTsKICAgIHRoaXMuY2hhbmdlSW5kZXhTaWRlYmFyKCk7CiAgICB0aGlzLmdldERhdGEoKQogIH0sCiAgd2F0Y2g6IHsKICAgIGRpYWxvZ0FkZFJvbGUodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHRoaXMuJHJlZnMuZm9ybUFkZFJvbGUucmVzZXRGaWVsZHMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ubmFtZSA9ICIiOwogICAgICAgIHRoaXMuZm9ybS5kZXNjcmlwdGlvbiA9ICIiOwogICAgICB9CiAgICB9LAogICAgZGlhbG9nRWRpdFJvbGUodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm1BZGRSb2xlKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1BZGRSb2xlLnJlc2V0RmllbGRzKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Role.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <el-card>\n      <div class=\"box-search\">\n        <el-input\n          class=\"search-input\"\n          placeholder=\"Nhập vào tên vai trò\"\n          v-model=\"search\"\n          prefix-icon=\"el-icon-search\"\n          clearable\n          @clear=\"handleSearch\"\n          @keydown.enter.native=\"handleSearch\"\n        >\n        </el-input>\n        <el-button class=\"search-btn\" @click=\"handleSearch\">Tìm kiếm</el-button>\n        <el-button\n          class=\"show-card\"\n          type=\"primary\"\n          @click=\"dialogAddRole = true\"\n          ><i class=\"fa fa-plus\"></i> Thêm mới</el-button\n        >\n      </div>\n    </el-card>\n    <el-card class=\"table-roles\">\n      <div></div>\n      <div class=\"box-tabel\">\n        <el-table\n          :data=\"roles\"\n          height=\"calc(100vh - 300px)\"\n          style=\"width: 100%\"\n          v-loading=\"loading\"\n        >\n          <el-table-column prop=\"name\" label=\"Tên vai trò\"> </el-table-column>\n          <el-table-column prop=\"description\" label=\"Mô tả\"> </el-table-column>\n          <el-table-column prop=\"created_at\" label=\"Ngày tạo\">\n            <template slot-scope=\"scope\">\n              {{ formatDateCreated(scope.row.created_at) }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"Hoạt động\"\n            width=\"90px\"\n            align=\"center\"\n            class=\"tabel-work\"\n          >\n            <template slot-scope=\"scope\">\n              <el-popover\n                class=\"pop-edit\"\n                placement=\"bottom\"\n                width=\"100px\"\n                trigger=\"click\"\n              >\n                <div class=\"box-edit-dailog\" @click=\"showPermissions(scope.row._id)\">\n                  <i class=\"fa fa-sliders\"></i> Quyền hạn\n                </div>\n                <div class=\"box-edit-dailog\" @click=\"editRole(scope.row)\">\n                  <i class=\"fa fa-pencil\"></i> Chỉnh sửa\n                </div>\n                <div class=\"box-edit-dailog\" @click=\"handleDeleteRole(scope.row._id)\">\n                  <i class=\"el-icon-delete\"></i> Xoá bỏ\n                </div>\n                <div v-if=\"!scope.row.is_protected\" class=\"btn-edit\" slot=\"reference\">\n                  <i class=\"fa fa-ellipsis-v\"></i>\n                </div>\n              </el-popover>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n      <div class=\"paginationWarp\">\n        <el-col :span=\"10\">\n          <div class=\"textInfo\">\n            <p>\n              Số lượng kết quả: {{ page.from }} - {{ page.to }} của\n              {{ page.total }}\n            </p>\n          </div>\n        </el-col>\n        <el-col :span=\"14\">\n          <el-pagination\n            background\n            layout=\"prev, pager, next\"\n            :total=\"page.total\"\n            :page-size=\"page.pageSize\"\n            :current-page=\"page.currentPage\"\n            @current-change=\"handleCurrentChange\"\n          >\n          </el-pagination>\n        </el-col>\n      </div>\n    </el-card>\n    <el-dialog\n        class=\"dialog-add-category\"\n        id=\"dialog-add-category\"\n        width=\"600px\"\n        title=\"Thêm mới chức vụ\"\n        top=\"5vh\"\n        :visible.sync=\"dialogAddRole\"\n    >\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form\n              class=\"form-role\"\n              :model=\"form\"\n              :rules=\"rules\"\n              ref=\"formAddRole\"\n              label-position=\"top\"\n              hide-required-asterisk\n              label-width=\"130px\"\n              size=\"small\"\n          >\n            <el-row>\n              <el-col :span=\"24\" class=\"margin-input\">\n                <el-form-item prop=\"name\">\n                  <label class=\"label-role\"\n                  >Tên chức vụ <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                      size=\"medium\"\n                      v-model=\"form.name\"\n                      autocomplete=\"off\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item prop=\"description\">\n                  <label class=\"label-role\">Mô tả</label>\n                  <el-input\n                      size=\"medium\"\n                      v-model=\"form.description\"\n                      :autosize=\"{ minRows: 4, maxRows: 6 }\"\n                      autocomplete=\"off\"\n                      type=\"textarea\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-form>\n        </el-col>\n      </el-row>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogAddRole = false\">Hủy</el-button>\n        <el-button type=\"primary\" @click=\"storeRole('formAddRole')\"\n        >Lưu</el-button\n        >\n      </span>\n    </el-dialog>\n    <el-dialog\n        class=\"dialog-add-category\"\n        id=\"dialog-edit-category\"\n        width=\"600px\"\n        title=\"Chỉnh sửa chức vụ\"\n        top=\"5vh\"\n        :visible.sync=\"dialogEditRole\"\n    >\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form\n              class=\"form-role\"\n              :model=\"form\"\n              :rules=\"rules\"\n              ref=\"formEditRole\"\n              label-position=\"top\"\n              hide-required-asterisk\n              label-width=\"130px\"\n              size=\"small\"\n          >\n            <el-row>\n              <el-col :span=\"24\" class=\"margin-input\">\n                <el-form-item prop=\"name\">\n                  <label class=\"label-role\"\n                  >Tên chức vụ <span class=\"required\"> *</span></label\n                  >\n                  <el-input\n                      size=\"medium\"\n                      v-model=\"form.name\"\n                      autocomplete=\"off\"\n                  ></el-input>\n                </el-form-item>\n                <el-form-item prop=\"description\">\n                  <label class=\"label-role\">Mô tả</label>\n                  <el-input\n                      size=\"medium\"\n                      v-model=\"form.description\"\n                      :autosize=\"{ minRows: 4, maxRows: 6 }\"\n                      autocomplete=\"off\"\n                      type=\"textarea\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-form>\n        </el-col>\n      </el-row>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogEditRole = false\">Hủy</el-button>\n        <el-button type=\"primary\" @click=\"handleUpdateRole('formEditRole')\"\n        >Lưu</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from \"../api\";\nimport { mapMutations, mapState } from \"vuex\";\nimport { formatDate } from \"@/utils/helper\";\nimport _ from \"lodash\";\nimport router from \"@/router\";\nexport default {\n  name: \"Customer\",\n  props: {\n    msg: String,\n  },\n  components: {},\n  computed: {\n    ...mapState(\"auth\", [\"authUser\"]),\n  },\n  data() {\n    return {\n      search: \"\",\n      total: 0,\n      dialogAddRole: false,\n      roles: [],\n      page: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0,\n        from: 0,\n        to: 0,\n      },\n      form: {\n        name: \"\",\n        description: \"\",\n      },\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"Tên chức vụ không được bỏ trống!\",\n            trigger: \"change\",\n          },\n        ],\n      },\n      loading: false,\n      dialogEditRole: false,\n      roleEditId: ''\n    };\n  },\n  methods: {\n    ...mapMutations([\"updateTitle\", \"updateSideBar\"]),\n    changePageTitle() {\n      this.updateTitle(\"Vai trò nhân viên\");\n    },\n    changeIndexSidebar() {\n      this.updateSideBar(\"7\");\n    },\n    formatDateCreated(dateString) {\n      return formatDate(dateString);\n    },\n    handleCurrentChange(val) {\n      console.log(val)\n    },\n    getData(params = {}) {\n      this.loading = true\n      api.getDataRoles(params).then((res) => {\n        this.roles = _.get(res, 'data.data.data')\n        this.total = res.data.data.total;\n        this.page.currentPage = _.get(res, 'data.data.current_page')\n        this.page.pageSize = _.get(res, 'data.data.per_page')\n        this.page.total = _.get(res, 'data.data.total')\n        let from = _.get(res, 'data.data.from', 0)\n        let to = _.get(res, 'data.data.to', 0)\n        this.page.from = from ? from : 0\n        this.page.to = to ? to : 0\n        this.loading = false\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    storeRole(formAddRole) {\n      this.$refs[formAddRole].validate((valid) => {\n        if (valid) {\n          let data = {\n            name: this.form.name,\n            description: this.form.description\n          }\n          api.addRole(data).then(() => {\n            this.dialogAddRole = false\n            this.getData()\n            this.$message({\n              message: \"Thêm mới thành công!\",\n              type: \"success\",\n            });\n          })\n        }\n      });\n    },\n    handleSearch() {\n      let payload = {\n        page: 1\n      }\n      if (this.search.length > 0) {\n        payload.q = this.search\n      }\n      this.getData(payload)\n    },\n    editRole(role) {\n      this.dialogEditRole = true\n      this.roleEditId = role._id\n      this.form.name = role.name\n      this.form.description = role.description\n    },\n    handleUpdateRole(formEditRole) {\n      this.$refs[formEditRole].validate((valid) => {\n        if (valid) {\n          let data = {\n            name: this.form.name,\n            description: this.form.description\n          }\n          api.updateRole(this.roleEditId, data).then(() => {\n            this.dialogEditRole = false\n            this.handleSearch()\n            this.$message({\n              message: \"Cập nhật thành công!\",\n              type: \"success\",\n            });\n          }).catch(() => {\n            this.$message({\n              message: \"Cập nhật thất bại!\",\n              type: \"error\",\n            });\n          })\n        }\n      });\n    },\n    handleDeleteRole(id) {\n      this.$confirm(\"Bạn có chắc chắn muốn xóa vai trò này?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Hủy\",\n        confirmButtonClass: \"btn-delete-list\",\n        type: \"warning\",\n      }).then(() => {\n        api.deleteRole(id).then(() => {\n          this.handleSearch()\n          this.$message({\n            message: \"Xóa thành công!\",\n            type: \"success\",\n          });\n        }).catch(() => {\n          this.$message({\n            message: \"Xóa thất bại!\",\n            type: \"error\",\n          });\n        })\n      })\n    },\n    showPermissions(id) {\n      if (router.currentRoute.name !== \"Permission\") {\n        return router.push({ name: \"Permission\", query: {id: id} });\n      }\n    }\n  },\n  mounted() {\n    this.changePageTitle();\n    this.changeIndexSidebar();\n    this.getData()\n  },\n  watch: {\n    dialogAddRole(value) {\n      if (!value) {\n        this.$refs.formAddRole.resetFields();\n      } else {\n        this.form.name = \"\";\n        this.form.description = \"\";\n      }\n    },\n    dialogEditRole(value) {\n      if (!value) {\n        if (this.$refs.formAddRole) {\n          this.$refs.formAddRole.resetFields();\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../assets/styles/variables\";\n\n.dashboard {\n  label {\n    font-weight: bold;\n    margin-bottom: 10px;\n  }\n  .table-roles {\n    margin-top: 20px;\n  }\n  .paginationWarp {\n    padding: 20px 0;\n    margin-bottom: 10px;\n\n    .el-pagination {\n      float: right;\n    }\n\n    .textInfo {\n      p {\n        font-size: 0.92857rem;\n        margin: 10px 0;\n      }\n    }\n  }\n  .form-role {\n    .label-role {\n      font-weight: bold;\n      .required {\n        color: $colorRed;\n      }\n    }\n    .select-categories {\n      width: 100%;\n    }\n  }\n}\n.text {\n  font-size: 14px;\n}\n.search-input {\n  width: 25%;\n}\n.search-btn {\n  margin-left: 20px;\n}\n.show-card {\n  float: right;\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n.clearfix:after {\n  clear: both;\n}\n.btn-edit-work {\n  margin-left: 7px !important;\n}\n.box-edit-dailog {\n  font-weight: 400;\n  color: #212529;\n  text-align: inherit;\n  margin-top: 5px;\n  margin-bottom: 10px;\n  height: 30px;\n  line-height: 30px;\n  i {\n    margin-right: 5px;\n  }\n  cursor: pointer;\n}\n.box-edit-dailog:hover {\n  background-color: #f8f9fa;\n}\n.pop-edit {\n  cursor: pointer;\n}\n.btn-delete-list {\n  background: $colorRed!important;\n  border: 1px solid $colorRed;\n}\n@media only screen and (max-width: 992px){\n  .search-input {\n    width: 60%;\n  }\n  .search-btn {\n    margin-left: 10px;\n  } \n}\n@media only screen and (max-width: 768px){\n  .search-input {\n    width: 83%;\n  }\n  .show-card {\n    display: block;\n    float: none;\n    margin-top: 10px;\n    margin-left: 0px;\n  }\n  .search-btn {\n    margin-left: 10px;\n  } \n  .paginationWarp {\n    padding: 20px 0!important;\n    margin-bottom: 10px!important;\n    .el-col-10 {\n      width: 100%!important;\n      float: none;\n    }\n    .el-col-14 {\n      width: 100%;\n\n    }\n    .el-pagination {\n      float: none!important;\n      text-align: center;\n    }\n    .textInfo, .pagination-box {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        p {\n            font-size: 12px;\n            margin-bottom: 10px;\n        }\n    }\n  }\n  @media only screen and (max-width: 375px){\n    .search-input {\n      width: 60%;\n    }\n  }\n}\n</style>\n"]}]}